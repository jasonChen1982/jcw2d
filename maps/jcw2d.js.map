{"version":3,"sources":["jcw2d.js","modules/utils.js","modules/event.js","modules/animation.js","modules/math/point.js","modules/math/rectangle.js","modules/math/matrix.js","modules/textures/baseTexture.js","modules/textures/texture.js","modules/textures/textureUvs.js","modules/display/display.js","modules/display/container.js","modules/sprite/sprite.js","modules/particles/particleContainer.js","modules/renderer/renderer.js","modules/renderer/manager/shaderManager.js","modules/renderer/manager/blendModeManager.js","modules/renderer/shaders/shader.js","modules/renderer/shaders/spriteShader.js","modules/renderer/shaders/particleShader.js","modules/renderer/shaders/graphicsShader.js","modules/RAF.js","modules/const.js","modules/tween.js"],"names":["root","factory","exports","module","define","amd","JC","this","_rt","val","Object","prototype","toString","call","InteractionData","global","x","y","target","originalEvent","cancleBubble","ratio","type","Eventer","touchstarted","mouseDowned","listeners","Animate","opts","element","duration","living","onCompelete","onUpdate","infinity","alternate","ease","repeats","delay","progress","timeScale","paused","Transition","ATRS","from","ATRE","to","Animation","_keyframes","keys","_keyIndex","_direction","_keyConfig","keyConfig","configKey","MovieClip","animations","index","direction","frames","sy","sx","fillMode","fps","pt","nt","PathMotion","points","attachNormal","sDeg","tDeg","pDeg","Animator","start","animates","Point","Rectangle","width","height","Matrix","a","b","c","d","tx","ty","BaseTexture","source","scaleMode","realWidth","realHeight","CONST","SCALE_MODES","DEFAULT","hasLoaded","isLoading","resolution","premultipliedAlpha","imageUrl","isPowerOfTwo","mipmap","loadSource","Texture","baseTexture","frame","noFrame","_frame","valid","requiresUpdate","_uvs","on","onBaseTextureUpdated","bind","once","onBaseTextureLoaded","TextureUvs","x0","y0","x1","y1","x2","y2","x3","y3","DisplayObject","_ready","visible","worldAlpha","alpha","scaleX","scaleY","skewX","skewY","rotation","rotationCache","_sr","_cr","pivotX","pivotY","mask","parent","worldTransform","event","passEvent","bounds","Container","cds","Sprite","texture","regX","regY","_texture","tint","blendMode","BLEND_MODES","NORMAL","shaderType","cachedTint","cachedAlpha","vertices","indices","Uint16Array","colors","dynamicStride","dynamicBuffer","dynamicData","indexBuffer","update","ParticleContainer","maxSize","properties","batchSize","maxBatchSize","_properties","_maxSize","_batchSize","_buffers","_bufferToUpdate","interactiveChildren","setProperties","Renderer","view","options","i","DEFAULT_RENDER_OPTIONS","document","getElementById","projection","Float32Array","transparent","autoResize","blendModes","preserveDrawingBuffer","autoClear","_backgroundColor","_backgroundColorRgb","_backgroundColorString","backgroundColor","handleContextLost","handleContextRestored","addEventListener","_contextOptions","antialias","stencil","_createContext","_initContext","_mapGlModes","shaderManager","ShaderManager","blendModeManager","BlendModeManager","renderSession","gl","drawCount","renderer","_tempDisplayObjectParent","IDENTITY","children","currentShader","init","currentBlendMode","Shader","vertexSrc","fragmentSrc","uniforms","attributes","Error","program","textureCount","MAX_TEXTURE_UNITS","getParameter","MAX_TEXTURE_IMAGE_UNITS","SpriteShader","uSampler","value","projectionMatrix","projectionVector","aVertexPosition","size","aTextureCoord","aColor","join","ParticleShader","uAlpha","aAlpha","aPositionCoord","aRotation","GraphicsShader","window","lastTime","vendors","test","navigator","userAgent","length","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","RAF","requestAnimFrame","VERSION","PI_2","PI","RTD","DTR","ADD","MULTIPLY","SCREEN","DRAW_MODES","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINEAR","NEAREST","SPRITE_BATCH_SIZE","UTILS","hex2rgb","hex","out","hex2string","substr","rgb2hex","rgb","getNextPowerOfTwo","number","result","sayHi","_saidHi","toLowerCase","indexOf","args","console","log","apply","isWebGLSupported","contextOptions","WebGLRenderingContext","canvas","createElement","getContext","getContextAttributes","e","sign","n","removeItems","arr","startIdx","removeCount","len","copyJSON","json","JSON","parse","stringify","isArray","ks","object","isObject","isNumber","isFunction","random","min","euclideanModulo","m","clamp","TextureCache","BaseTextureCache","TWEEN","easeBoth","t","extend","key","fn","push","off","ears","cbs","splice","This","cb","ev","emit","undefined","nextPose","cache","pause","stop","cancle","create","constructor","snippet","pose","setVal","sc","config","interval","next","getFramePos","pos","cf","row","_textureW","lintRow","lintCol","mCol","mRow","playMovie","movie","format","isString","warn","end","defineProperty","get","getPoint","rotate","decomposeRotate","rT","l","slice","r","oP","oL","oR","p1","p2","xxxxx","fromTo","animate","keyFrames","clone","copy","p","set","equals","EMPTY","contains","fromArray","array","toArray","transpose","newPos","applyInverse","translate","scale","angle","cos","sin","a1","c1","tx1","append","matrix","b1","d1","identity","setTransform","sr","cr","cy","nsx","cx","TEMP_MATRIX","naturalWidth","naturalHeight","wasLoading","complete","_sourceLoaded","onload","onerror","src","fromImage","crossorigin","image","Image","crossOrigin","defineProperties","_updateUvs","fromCanvas","baseFrame","tw","th","clear","isVisible","vals","updateMe","wt","upAnimation","getGlobalPos","getBounds","setBounds","needless","ContainsPoint","px","py","ax","ay","bx","by","lup","depth","lx","addChilds","cd","arguments","removeChilds","updateTransform","updateChilds","render","session","renderMe","renderChilds","noticeEvent","child","upEvent","hitTest","re","hitTestMe","getBound","upTexture","concat","setBlendMode","setShader","shader","syncUniforms","initBuffers","uploadDynamic","bindBuffers","drawElements","UNSIGNED_SHORT","property","dynamicOffset","offset","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","DYNAMIC_DRAW","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","enableVertexAttribArray","_location","vertexAttribPointer","FLOAT","uvs","bufferSubData","containsPoint","point","position","displayObjectUpdateTransform","renderable","setObjectRenderer","plugins","particle","disable","DEPTH_TEST","CULL_FACE","enable","BLEND","resize","now","isContextLost","cacheParent","clearColor","COLOR_BUFFER_BIT","renderDisplayObject","displayObject","preventDefault","ONE","ONE_MINUS_SRC_ALPHA","DST_ALPHA","DST_COLOR","ONE_MINUS_SRC_COLOR","drawModes","viewport","style","maxAttibs","MAX_VERTEX_ATTRIBS","shaderPool","sprite","graphics","useProgram","mode","blendFunc","compile","cacheUniformLocations","cacheAttributeLocations","getUniformLocation","getAttribLocation","glVertShader","_glCompile","VERTEX_SHADER","glFragShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","error","VALIDATE_STATUS","getError","getProgramInfoLog","deleteProgram","deleteShader","syncUniform","uniform","il","location","uniform1i","uniform1f","uniform2f","uniform3f","uniform4f","z","w","uniform1iv","uniform2iv","uniform3iv","uniform4iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","utils","_array","activeTexture","initSampler2D","bindTexture","TEXTURE_2D","updateTexture","createTexture","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_NEAREST","generateMipmap","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","CLAMP_TO_EDGE","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog"],"mappings":"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","file":"../src/jcw2d.js","sourcesContent":["(function (root, factory) {\n  if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(function () {\n      return (root.JC = factory());\n    });\n  } else {\n    // Global Variables\n    root.JC = factory();\n  }\n}(this, function () {\n\n    var JC = window.JC||{};\n\n    (function() {\n        var lastTime = 0;\n        var androidUC = /(?=.*?uc)(?=.*?android)/i.test(window.navigator.userAgent);\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n                window[vendors[x] + 'CancelRequestAnimationFrame'];\n        }\n    \n        if (!window.requestAnimationFrame) {\n            window.requestAnimationFrame = function(callback) {\n                var currTime = new Date().getTime();\n                var timeToCall = Math.max(0, 20 - (currTime - lastTime));\n                var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n                    timeToCall);\n                lastTime = currTime + timeToCall;\n                return id;\n            };\n        }\n    \n        if (!window.cancelAnimationFrame) {\n            window.cancelAnimationFrame = function(id) {\n                clearTimeout(id);\n            };\n        }\n    \n        window.RAF = window.requestAnimFrame = window.requestAnimationFrame;\n    })();\n    \n\n    \n    JC.CONST = {\n        VERSION: '0.0.1',\n    \n        PI_2: Math.PI * 2,\n    \n        RTD: 180 / Math.PI,\n    \n        DTR: Math.PI / 180,\n    \n    \n        /**\n         *\n         * @static\n         * @constant\n         * @property {object} BLEND_MODES\n         * @property {number} BLEND_MODES.NORMAL\n         * @property {number} BLEND_MODES.ADD\n         * @property {number} BLEND_MODES.MULTIPLY\n         * @property {number} BLEND_MODES.SCREEN\n         */\n        BLEND_MODES: {\n            NORMAL:         0,\n            ADD:            1,\n            MULTIPLY:       2,\n            SCREEN:         3\n        },\n    \n        /**\n         *\n         * @static\n         * @constant\n         * @property {object} DRAW_MODES\n         * @property {number} DRAW_MODES.POINTS\n         * @property {number} DRAW_MODES.LINES\n         * @property {number} DRAW_MODES.LINE_LOOP\n         * @property {number} DRAW_MODES.LINE_STRIP\n         * @property {number} DRAW_MODES.TRIANGLES\n         * @property {number} DRAW_MODES.TRIANGLE_STRIP\n         * @property {number} DRAW_MODES.TRIANGLE_FAN\n         */\n        DRAW_MODES: {\n            POINTS:         0,\n            LINES:          1,\n            LINE_LOOP:      2,\n            LINE_STRIP:     3,\n            TRIANGLES:      4,\n            TRIANGLE_STRIP: 5,\n            TRIANGLE_FAN:   6\n        },\n    \n        /**\n         *\n         * @static\n         * @constant\n         * @property {object} SCALE_MODES\n         * @property {number} SCALE_MODES.DEFAULT=LINEAR\n         * @property {number} SCALE_MODES.LINEAR Smooth scaling\n         * @property {number} SCALE_MODES.NEAREST Pixelating scaling\n         */\n        SCALE_MODES: {\n            DEFAULT:    0,\n            LINEAR:     0,\n            NEAREST:    1\n        },\n    \n        DEFAULT_RENDER_OPTIONS: {\n            view: null,\n            resolution: 1,\n            antialias: true,\n            autoResize: false,\n            transparent: false,\n            backgroundColor: 0x000000,\n            autoClear: true,\n            preserveDrawingBuffer: false\n        },\n    \n        SPRITE_BATCH_SIZE: 2000 //nice balance between mobile and desktop machines\n    };\n\n    /**\n     * 简单拷贝json对象\n     *\n     * @name copyJSON\n     * @memberof JC\n     * @property {JC.copyJSON}\n     */\n    \n    // JC.copyJSON = ;\n    \n    /**\n     * 将角度转化成弧度\n     *\n     * @name DTR\n     * @memberof JC\n     * @property {JC.DTR}\n     */\n    \n    // JC.DTR = Math.PI/180;\n    \n    \n    /**\n     * 是否为数组\n     *\n     * @name isArray\n     * @memberof JC\n     * @property {JC.isArray}\n     */\n    // JC.isArray = ;\n    \n    /**\n     * 是否为对象\n     *\n     * @name isObject\n     * @memberof JC\n     * @property {JC.isObject}\n     */\n    // JC.isObject = (function(){\n    //     var ks = _rt({});\n    //     return function(object){\n    //         return Object.prototype.toString.call(object) === ks;\n    //     };\n    // })();\n    \n    /**\n     * 是否为数字\n     *\n     * @name isNumber\n     * @memberof JC\n     * @property {JC.isNumber}\n     */\n    // JC.isNumber = (function(){\n    //     var ks = _rt(1);\n    //     return function(object){\n    //         return Object.prototype.toString.call(object) === ks;\n    //     };\n    // })();\n    \n    /**\n     * 是否为函数\n     *\n     * @name isFunction\n     * @memberof JC\n     * @property {JC.isFunction}\n     */\n    // JC.isFunction = (function(){\n    //     var ks = _rt(function(){});\n    //     return function(object){\n    //         return Object.prototype.toString.call(object) === ks;\n    //     };\n    // })();\n    \n    /**\n     * 强化的随机数\n     *\n     * @name random\n     * @memberof JC\n     * @property {JC.random}\n     */\n    \n    // JC.random = function(min, max){\n    //     if (JC.isArray(min))\n    //         return min[~~(Math.random() * min.length)];\n    //     if (!JC.isNumber(max))\n    //         max = min || 1, min = 0;\n    //     return min + Math.random() * (max - min);\n    // };\n    \n    \n    /**\n     * 阿基米德求模\n     *\n     * @name euclideanModulo\n     * @memberof JC\n     * @property {JC.euclideanModulo}\n     */\n    \n    // JC.euclideanModulo = function(n, m){\n    //     return ((n % m) + m) % m;\n    // };\n    \n    function _rt(val) {\n        return Object.prototype.toString.call(val);\n    }\n    \n    JC.UTILS = {\n    \n        hex2rgb: function(hex, out) {\n            out = out || [];\n    \n            out[0] = (hex >> 16 & 0xFF) / 255;\n            out[1] = (hex >> 8 & 0xFF) / 255;\n            out[2] = (hex & 0xFF) / 255;\n    \n            return out;\n        },\n    \n        hex2string: function(hex) {\n            hex = hex.toString(16);\n            hex = '000000'.substr(0, 6 - hex.length) + hex;\n    \n            return '#' + hex;\n        },\n    \n        rgb2hex: function(rgb) {\n            return ((rgb[0] * 255 << 16) + (rgb[1] * 255 << 8) + rgb[2] * 255);\n        },\n    \n        getNextPowerOfTwo: function(number) {\n            // see: http://en.wikipedia.org/wiki/Power_of_two#Fast_algorithm_to_check_if_a_positive_number_is_a_power_of_two\n            if (number > 0 && (number & (number - 1)) === 0) {\n                return number;\n            } else {\n                var result = 1;\n    \n                while (result < number) {\n                    result <<= 1;\n                }\n    \n                return result;\n            }\n        },\n    \n        isPowerOfTwo: function(width, height) {\n            return (width > 0 && (width & (width - 1)) === 0 && height > 0 && (height & (height - 1)) === 0);\n        },\n    \n        sayHi: function(type) {\n            if (this._saidHi) {\n                return;\n            }\n    \n            if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {\n                var args = [\n                    '\\n %c %c %c jcw2d.js ' + JC.CONST.VERSION + ' - ✰ ' + type + ' ✰  %c ' + ' %c ' + ' http://www.jason82.com/  %c %c ♥%c♥%c♥ \\n\\n',\n                    'background: #ff66a5; padding:5px 0;',\n                    'background: #ff66a5; padding:5px 0;',\n                    'color: #ff66a5; background: #030307; padding:5px 0;',\n                    'background: #ff66a5; padding:5px 0;',\n                    'background: #ffc3dc; padding:5px 0;',\n                    'background: #ff66a5; padding:5px 0;',\n                    'color: #ff2424; background: #fff; padding:5px 0;',\n                    'color: #ff2424; background: #fff; padding:5px 0;',\n                    'color: #ff2424; background: #fff; padding:5px 0;'\n                ];\n    \n                window.console.log.apply(console, args); //jshint ignore:line\n            } else if (window.console) {\n                window.console.log('jcw2d.js ' + JC.CONST.VERSION + ' - ' + type + ' - http://www.jason82.com/'); //jshint ignore:line\n            }\n    \n            this._saidHi = true;\n        },\n    \n        isWebGLSupported: function() {\n            var contextOptions = { stencil: true };\n            try {\n                if (!window.WebGLRenderingContext) {\n                    return false;\n                }\n    \n                var canvas = document.createElement('canvas'),\n                    gl = canvas.getContext('webgl', contextOptions) || canvas.getContext('experimental-webgl', contextOptions);\n    \n                return !!(gl && gl.getContextAttributes().stencil);\n            } catch (e) {\n                return false;\n            }\n        },\n    \n        sign: function(n) {\n            return n ? (n < 0 ? -1 : 1) : 0;\n        },\n    \n        removeItems: function(arr, startIdx, removeCount) {\n            var length = arr.length;\n    \n            if (startIdx >= length || removeCount === 0) {\n                return;\n            }\n    \n            removeCount = (startIdx + removeCount > length ? length - startIdx : removeCount);\n            for (var i = startIdx, len = length - removeCount; i < len; ++i) {\n                arr[i] = arr[i + removeCount];\n            }\n    \n            arr.length = len;\n        },\n    \n        copyJSON: function(json) {\n            return JSON.parse(JSON.stringify(json));\n        },\n    \n        isArray: (function() {\n            var ks = _rt('s');\n            return function(object) {\n                return Object.prototype.toString.call(object) === ks;\n            };\n        })(),\n    \n        isObject: (function() {\n            var ks = _rt({});\n            return function(object) {\n                return Object.prototype.toString.call(object) === ks;\n            };\n        })(),\n    \n        isNumber: (function() {\n            var ks = _rt(1);\n            return function(object) {\n                return Object.prototype.toString.call(object) === ks;\n            };\n        })(),\n    \n        /**\n         * 是否为函数\n         *\n         * @name isFunction\n         * @memberof JC\n         * @property {JC.isFunction}\n         */\n        isFunction: (function() {\n            var ks = _rt(function() {});\n            return function(object) {\n                return Object.prototype.toString.call(object) === ks;\n            };\n        })(),\n    \n        /**\n         * 强化的随机数\n         *\n         * @name random\n         * @memberof JC\n         * @property {JC.random}\n         */\n        random: function(min, max) {\n            if (this.isArray(min))\n                return min[~~(Math.random() * min.length)];\n            if (!this.isNumber(max))\n                max = min || 1, min = 0;\n            return min + Math.random() * (max - min);\n        },\n    \n        /**\n         * 阿基米德求模\n         *\n         * @name euclideanModulo\n         * @memberof JC\n         * @property {JC.euclideanModulo}\n         */\n        euclideanModulo: function(n, m) {\n            return ((n % m) + m) % m;\n        },\n    \n        clamp: function(x, a, b) {\n            return (x < a) ? a : ((x > b) ? b : x);\n        },\n    \n        TextureCache: {},\n    \n        BaseTextureCache: {}\n    \n    };\n    \n\n    JC.TWEEN = {\n        easeBoth: function(t, b, c, d) { //加速减速曲线\n            if ((t /= d / 2) < 1) {\n                return c / 2 * t * t + b;\n            }\n            return -c / 2 * ((--t) * (t - 2) - 1) + b;\n        },\n        extend: function(opts) {\n            if (!opts) return;\n            for (var key in opts) {\n                if (key !== 'extend' && opts[key]) this[key] = opts[key];\n            }\n        }\n    };\n    \n\n    /**\n     * jcw2d的事件消息对象的类\n     *\n     * @class JC.InteractionData\n     * @constructor\n     */\n    function InteractionData() {\n        /**\n         * 转换到canvas坐标系统的事件触发点\n         *\n         * @property global\n         * @type Object\n         */\n        this.global = { x: -100000, y: -100000 };\n    \n        /**\n         * 事件源\n         *\n         * @property target\n         * @type JC.Container\n         */\n        this.target = null;\n    \n        /**\n         * 浏览器的原始事件对象\n         *\n         * @property originalEvent\n         * @type Event\n         */\n        this.originalEvent = null;\n    \n        /**\n         * 在canvas内阻止事件冒泡\n         *\n         * @property cancleBubble\n         * @type Boolean\n         */\n        this.cancleBubble = false;\n    \n        /**\n         * canvas视窗和页面坐标的兑换比例\n         *\n         * @property ratio\n         * @type Number\n         */\n        this.ratio = 1;\n    \n        /**\n         * 事件类型\n         *\n         * @property type\n         * @type String\n         */\n        this.type = '';\n    }\n    JC.InteractionData = InteractionData;\n    \n    \n    \n    /**\n     * jcw2d的事件对象的类\n     *\n     * @class JC.Eventer\n     * @constructor Eventer\n     * @memberof JC\n     */\n    function Eventer() {\n        this.touchstarted = false;\n        this.mouseDowned = false;\n        this.listeners = {};\n    }\n    /**\n     * 事件对象的事件绑定函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 回调函数\n     * @private\n     */\n    Eventer.prototype.on = function(type, fn) {\n        this.listeners[type] = this.listeners[type] || [];\n        this.listeners[type].push(fn);\n    };\n    /**\n     * 事件对象的事件解绑函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 注册时回调函数的引用\n     * @private\n     */\n    Eventer.prototype.off = function(type, fn) {\n        var ears = this.listeners;\n        var cbs = ears[ type ];\n        var i = ears[type].length;\n        if (cbs&&i>0) {\n            if(fn){\n                while (i--) {\n                    if (cbs[i] === fn) {\n                        cbs.splice(i, 1);\n                    }\n                }\n            }else{\n                cbs.length = 0;\n            }\n        }\n    };\n    /**\n     * 事件对象的事件解绑函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 注册时回调函数的引用\n     * @private\n     */\n    Eventer.prototype.once = function(type, fn) {\n        var This = this,\n            cb = function(ev) {\n                fn && fn(ev);\n                This.off(type, cb);\n            };\n        this.on(type, cb);\n    };\n    /**\n     * 事件对象的触发事件函数\n     *\n     * @param ev {JC.InteractionData} 事件类型\n     * @private\n     */\n    Eventer.prototype.emit = function(ev) {\n        if (this.listeners === undefined) return;\n        var ears = this.listeners;\n        var cbs = ears[ev.type];\n        if (cbs !== undefined) {\n            var length = cbs.length;\n            var i;\n            for (i = 0; i < length; i++) {\n                cbs[i].call(this, ev);\n            }\n        }\n    };\n    JC.Eventer = Eventer;\n    \n\n    /**\n     * 动画对象的基本类型\n     *\n     * @class\n     * @memberof JC\n     * @param [opts] {object} 动画配置信息\n     */\n    \n    function Animate(opts) {\n        this.element = opts.element || {};\n        this.duration = opts.duration || 300;\n        this.living = true;\n    \n        this.onCompelete = opts.onCompelete || null;\n        this.onUpdate = opts.onUpdate || null;\n    \n        this.infinity = opts.infinity || false;\n        this.alternate = opts.alternate || false;\n        this.ease = opts.ease || 'easeBoth';\n        this.repeats = opts.repeats || 0;\n        this.delay = opts.delay || 0;\n        this.progress = 0 - this.delay;\n    \n        this.timeScale = opts.timeScale || 1;\n    \n        this.paused = false;\n    }\n    JC.Animate = Animate;\n    Animate.prototype.nextPose = function() {\n        var cache = {};\n        for (var i in this.ATRE) {\n            cache[i] = JC.TWEEN[this.ease](this.progress, this.ATRS[i], this.ATRE[i] - this.ATRS[i], this.duration);\n            if (this.element[i] !== undefined) this.element[i] = cache[i];\n        }\n        return cache; //this.onUpdate\n    };\n    Animate.prototype.pause = function() {\n        this.paused = true;\n    };\n    Animate.prototype.start = function() {\n        this.paused = false;\n    };\n    Animate.prototype.stop = function() {\n        this.progress = this.duration;\n    };\n    Animate.prototype.cancle = function() {\n        this.living = false;\n    };\n    \n    \n    /**\n     * Transition类型动画对象\n     *\n     * @class\n     * @memberof JC\n     * @param [opts] {object} 动画所具备的特性\n     */\n    \n    function Transition(opts) {\n        JC.Animate.call(this, opts);\n    \n        this.ATRS = opts.from;\n        this.ATRE = opts.to;\n    }\n    JC.Transition = Transition;\n    Transition.prototype = Object.create(JC.Animate.prototype);\n    Transition.prototype.constructor = JC.Transition;\n    Transition.prototype.update = function(snippet) {\n        if (this.paused || !this.living) return;\n        this.progress += this.timeScale * snippet;\n    \n        if (this.progress < this.duration) {\n            if (this.progress < 0) return;\n            var pose = this.nextPose();\n            this.onUpdate && this.onUpdate(pose, this.progress / this.duration);\n        } else {\n            this.element.setVal(this.ATRE);\n            this.onUpdate && this.onUpdate(this.ATRE, 1);\n            if (this.repeats > 0 || this.infinity) {\n                this.repeats > 0 && --this.repeats;\n                this.progress = 0;\n                if (this.alternate) {\n                    var sc = JC.UTILS.copyJSON(this.ATRS);\n                    this.ATRS = JC.UTILS.copyJSON(this.ATRE);\n                    this.ATRE = sc;\n                } else {\n                    this.element.setVal(this.ATRS);\n                }\n            } else {\n                this.living = false;\n                this.onCompelete && this.onCompelete();\n            }\n        }\n    };\n    \n    \n    /**\n     * Animation类型动画对象\n     *\n     * @class\n     * @memberof JC\n     * @param [opts] {object} 动画配置信息\n     */\n    function Animation(opts) {\n        JC.Animate.call(this, opts);\n    \n        this._keyframes = opts.keys;\n        this._keyIndex = 0;\n        this._direction = 1;\n        this._keyConfig = opts.keyConfig;\n    \n        this.configKey();\n    }\n    JC.Animation = Animation;\n    Animation.prototype = Object.create(JC.Animate.prototype);\n    Animation.prototype.constructor = JC.Animation;\n    Animation.prototype.configKey = function() {\n        this.ATRS = this._keyframes[this._keyIndex];\n        this._keyIndex += this._direction;\n        this.ATRE = this._keyframes[this._keyIndex];\n        var config = this._keyConfig[Math.min(this._keyIndex, this._keyIndex - this._direction)] || {};\n        this.ease = config.ease || this.ease;\n        this.duration = config.duration || this.duration;\n        this.progress = 0;\n    };\n    Animation.prototype.update = function(snippet) {\n        if (this.paused || !this.living) return;\n        this.progress += this.timeScale * snippet;\n    \n        if (this.progress < this.duration) {\n            if (this.progress < 0) return;\n            var pose = this.nextPose();\n            this.onUpdate && this.onUpdate(pose, this.progress / this.duration, this._keyIndex);\n        } else {\n            this.element.setVal(this.ATRE);\n            this.onUpdate && this.onUpdate(this.ATRE, 1, this._keyIndex);\n            if (this._keyIndex < this._keyframes.length - 1 && this._keyIndex > 0) {\n                this.configKey();\n            } else {\n                if (this.repeats > 0 || this.infinity) {\n                    this.repeats > 0 && --this.repeats;\n                    if (this.alternate) {\n                        this._direction *= -1;\n                    } else {\n                        this._keyIndex = 0;\n                    }\n                    this.configKey();\n                } else {\n                    this.living = false;\n                    this.onCompelete && this.onCompelete();\n                }\n            }\n        }\n    };\n    \n    \n    /**\n     * MovieClip类型动画对象\n     *\n     * @class\n     * @memberof JC\n     * @param [element] {object} 动画对象 内部传入\n     * @param [opts] {object} 动画配置信息 内部传入\n     */\n    function MovieClip(element, opts) {\n        this.element = element;\n        this.living = false;\n    \n        this.onCompelete = null;\n        // this.onUpdate = null;\n    \n        this.infinity = false;\n        this.alternate = false;\n        this.repeats = 0;\n    \n        this.animations = opts.animations || {};\n    \n        this.index = 0;\n        this.direction = 1;\n        this.frames = [];\n        this.sy = opts.sy || 0;\n        this.sx = opts.sx || 0;\n        this.fillMode = 0;\n        this.fps = 16;\n    \n        this.paused = false;\n    \n        this.pt = 0;\n        this.nt = 0;\n    }\n    JC.MovieClip = MovieClip;\n    MovieClip.prototype.update = function(snippet) {\n        if (this.paused || !this.living) return;\n        this.nt += snippet;\n        if (this.nt - this.pt < this.interval) return;\n        this.pt = this.nt;\n        var i = this.index + this.direction;\n        if (i < this.frames.length && i >= 0) {\n            this.index = i;\n            // Do you need this handler???\n            // this.onUpdate&&this.onUpdate(this.index);\n        } else {\n            if (this.repeats > 0 || this.infinity) {\n                this.repeats > 0 && --this.repeats;\n                if (this.alternate) {\n                    this.direction *= -1;\n                    this.index += this.direction;\n                } else {\n                    this.direction = 1;\n                    this.index = 0;\n                }\n                // Do you need this handler???\n                // this.onUpdate&&this.onUpdate(this.index);\n            } else {\n                this.living = false;\n                this.index = this.fillMode;\n                this.onCompelete && this.onCompelete();\n                this.next && this.next();\n            }\n        }\n    };\n    MovieClip.prototype.getFramePos = function() {\n        var pos = {\n            x: this.sx,\n            y: this.sy\n        };\n        var cf = this.frames[this.index];\n        if (cf > 0) {\n            var row = this.element._textureW / this.element.width >> 0;\n            var lintRow = this.sx / this.element.width >> 0;\n            var lintCol = this.sy / this.element.height >> 0;\n            var mCol = lintCol + (lintRow + cf) / row >> 0;\n            var mRow = (lintRow + cf) % row;\n            pos.x = mRow * this.element.width;\n            pos.y = mCol * this.element.height;\n        }\n        return pos;\n    };\n    MovieClip.prototype.playMovie = function(opts) {\n        this.next = null;\n        var movie = this.format(opts.movie);\n        if (!JC.isArray(movie)) return;\n        this.frames = movie;\n        this.index = 0;\n        this.direction = 1;\n        this.fillMode = opts.fillMode || 0;\n        this.fps = opts.fps || this.fps;\n        this.infinity = opts.infinity || false;\n        this.alternate = opts.alternate || false;\n        this.repeats = opts.repeats || 0;\n        this.living = true;\n        this.onCompelete = opts.onCompelete || null;\n    };\n    MovieClip.prototype.format = function(movie) {\n        if (JC.isString(movie)) {\n            var config = this.animations[movie];\n            if (config) {\n                return this.format(config);\n            } else {\n                console.warn(\n                    '%c JC.MovieClip warn %c: you didn\\`t config %c' + movie + '%c in animations ',\n                    'color: #f98165; background: #80a89e',\n                    'color: #80a89e; background: #cad9d5;',\n                    'color: #f98165; background: #cad9d5',\n                    'color: #80a89e; background: #cad9d5'\n                );\n                return false;\n            }\n        } else if (JC.isArray(movie)) {\n            return movie;\n        } else if (JC.isObject(movie)) {\n            var arr = [];\n            for (var i = movie.start; i <= movie.end; i++) {\n                arr.push(i);\n            }\n            if (movie.next && this.animations[movie.next]) {\n                var This = this;\n                this.next = function() {\n                    This.playMovie({\n                        movie: this.animations[movie.next],\n                        infinity: true\n                    });\n                };\n            }\n            return arr;\n        }\n    };\n    MovieClip.prototype.pause = function() {\n        this.paused = true;\n    };\n    MovieClip.prototype.start = function() {\n        this.paused = false;\n    };\n    MovieClip.prototype.cancle = function() {\n        this.living = false;\n    };\n    Object.defineProperty(MovieClip.prototype, 'interval', {\n        get: function() {\n            return this.fps > 0 ? 1000 / this.fps >> 0 : 16;\n        }\n    });\n    \n    \n    /**\n     * Transition类型动画对象\n     *\n     * @class\n     * @memberof JC\n     * @param [opts] {object} 动画所具备的特性\n     * @param [opts] {object} 动画配置信息\n     */\n    \n    function PathMotion(opts) {\n        JC.Animate.call(this, opts);\n    \n        this.points = opts.points;\n        this.attachNormal = opts.attachNormal || false;\n        this.sDeg = false;\n        this.tDeg = 0;\n        this.pDeg = 0;\n    }\n    JC.PathMotion = PathMotion;\n    PathMotion.prototype = Object.create(JC.Animate.prototype);\n    PathMotion.prototype.constructor = JC.PathMotion;\n    PathMotion.prototype.update = function(snippet) {\n        if (this.paused || !this.living) return;\n        this.progress += this.timeScale * snippet;\n    \n        if (this.progress < this.duration) {\n            if (this.progress < 0) return;\n            var pose = this.nextPose();\n            this.onUpdate && this.onUpdate(pose, this.progress / this.duration);\n        } else {\n            this.element.setVal(this.ATRE);\n            this.onUpdate && this.onUpdate(this.ATRE, 1);\n            if (this.repeats > 0 || this.infinity) {\n                this.repeats > 0 && --this.repeats;\n                this.progress = 0;\n                if (this.alternate) {\n                    var sc = JC.UTILS.copyJSON(this.ATRS);\n                    this.ATRS = JC.UTILS.copyJSON(this.ATRE);\n                    this.ATRE = sc;\n                } else {\n                    this.element.setVal(this.ATRS);\n                }\n            } else {\n                this.living = false;\n                this.onCompelete && this.onCompelete();\n            }\n        }\n    };\n    PathMotion.prototype.nextPose = function() {\n        var cache = {};\n        // for(var i in this.ATRE){\n        //     cache[i] = JC.TWEEN[this.ease]( this.progress , this.ATRS[i] , this.ATRE[i] - this.ATRS[i] , this.duration );\n        //     if(this.element[i]!==undefined)this.element[i] = cache[i];\n        // }\n        var t = JC.TWEEN[this.ease](this.progress, 0, 1, this.duration);\n        var pos = this.getPoint(t, this.points);\n        cache.x = pos.x;\n        cache.y = pos.y;\n        // cache.y = pos.y;\n        if (this.attachNormal) {\n            cache.rotate = this.decomposeRotate(t);\n        }\n        return cache; //this.onUpdate\n    };\n    PathMotion.prototype.getPoint = function(t, points) {\n        var a = points,\n            len = a.length,\n            rT = 1 - t,\n            l = a.slice(0, len - 1),\n            r = a.slice(1),\n            oP = {};\n        if (len > 3) {\n            var oL = this.getPoint(t, l),\n                oR = this.getPoint(t, r);\n            oP.x = rT * oL.x + t * oR.x;\n            oP.y = rT * oL.y + t * oR.y;\n            // oP.z = rT * oL.z + t * oR.z;\n            return oP;\n        } else {\n            oP.x = rT * rT * points[0].x + 2 * t * rT * points[1].x + t * t * points[2].x;\n            oP.y = rT * rT * points[0].y + 2 * t * rT * points[1].y + t * t * points[2].y;\n            // oP.z = rT * rT * points[0].z + 2 * t * rT * points[1].z + t * t * points[2].z;\n            return oP;\n        }\n    };\n    PathMotion.prototype.decomposeRotate = function(t) {\n        var p1 = this.getPoint(t, this.points);\n        var p2 = this.getPoint(t + 0.01, this.points);\n        var deg = p1.xxxxx + p2.x;\n    };\n    \n    /**\n     * Animator类型动画对象\n     *\n     * @class\n     * @memberof JC\n     */\n    function Animator() {\n        this.start = false;\n        this.animates = [];\n    }\n    JC.Animator = Animator;\n    Animator.prototype.update = function(snippet) {\n        for (var i = 0; i < this.animates.length; i++) {\n            if (!this.animates[i].living) this.animates.splice(i, 1);\n            this.animates[i] && this.animates[i].update(snippet);\n        }\n    };\n    Animator.prototype.fromTo = function(opts) {\n        var animate = new JC.Transition(opts);\n        this.animates.push(animate);\n        return animate;\n    };\n    Animator.prototype.keyFrames = function(opts) {\n        var animate = new JC.Animation(opts);\n        this.animates.push(animate);\n        return animate;\n    };\n    \n\n    /**\n     * The Point object represents a location in a two-dimensional coordinate system, where x represents\n     * the horizontal axis and y represents the vertical axis.\n     *\n     * @class\n     * @memberof PIXI\n     * @param [x=0] {number} position of the point on the x axis\n     * @param [y=0] {number} position of the point on the y axis\n     */\n    function Point(x, y) {\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x || 0;\n    \n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y || 0;\n    }\n    \n    JC.Point = Point;\n    Point.prototype.constructor = JC.Point;\n    \n    /**\n     * Creates a clone of this point\n     *\n     * @return {PIXI.Point} a copy of the point\n     */\n    Point.prototype.clone = function() {\n        return new Point(this.x, this.y);\n    };\n    \n    /**\n     * Copies x and y from the given point\n     *\n     * @param p {PIXI.Point}\n     */\n    Point.prototype.copy = function(p) {\n        this.set(p.x, p.y);\n    };\n    \n    /**\n     * Returns true if the given point is equal to this point\n     *\n     * @param p {PIXI.Point}\n     * @returns {boolean}\n     */\n    Point.prototype.equals = function(p) {\n        return (p.x === this.x) && (p.y === this.y);\n    };\n    \n    /**\n     * Sets the point to a new x and y position.\n     * If y is omitted, both x and y will be set to x.\n     *\n     * @param [x=0] {number} position of the point on the x axis\n     * @param [y=0] {number} position of the point on the y axis\n     */\n    Point.prototype.set = function(x, y) {\n        this.x = x || 0;\n        this.y = y || ((y !== 0) ? this.x : 0);\n    };\n    \n    function Rectangle(x, y, width, height)\n    {\n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.x = x || 0;\n    \n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.y = y || 0;\n    \n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.width = width || 0;\n    \n        /**\n         * @member {number}\n         * @default 0\n         */\n        this.height = height || 0;\n    \n    }\n    JC.Rectangle = Rectangle;\n    Rectangle.prototype.constructor = JC.Rectangle;\n    \n    /**\n     * A constant empty rectangle.\n     *\n     * @static\n     * @constant\n     */\n    Rectangle.EMPTY = new Rectangle(0, 0, 0, 0);\n    \n    \n    /**\n     * Creates a clone of this Rectangle\n     *\n     * @return {PIXI.Rectangle} a copy of the rectangle\n     */\n    Rectangle.prototype.clone = function ()\n    {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    };\n    \n    /**\n     * Checks whether the x and y coordinates given are contained within this Rectangle\n     *\n     * @param x {number} The X coordinate of the point to test\n     * @param y {number} The Y coordinate of the point to test\n     * @return {boolean} Whether the x/y coordinates are within this Rectangle\n     */\n    Rectangle.prototype.contains = function (x, y)\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n    \n        if (x >= this.x && x < this.x + this.width)\n        {\n            if (y >= this.y && y < this.y + this.height)\n            {\n                return true;\n            }\n        }\n    \n        return false;\n    };\n    \n    /**\n     * 矩阵对象，用来描述和记录对象的tansform 状态信息\n     *\n     * @class\n     * @memberof JC\n     */\n    function Matrix() {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n    }\n    JC.Matrix = Matrix;\n    Matrix.prototype.constructor = JC.Matrix;\n    \n    /**\n     * 从数组设置一个矩阵\n     *\n     * @param array {number[]}\n     */\n    Matrix.prototype.fromArray = function(array) {\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    };\n    \n    /**\n     * 将对象的数据以数组的形式导出\n     *\n     * @param transpose {boolean} 是否对矩阵进行转置\n     * @return {number[]} 返回数组\n     */\n    Matrix.prototype.toArray = function(transpose) {\n        if (!this.array) this.array = new Float32Array(9);\n        var array = this.array;\n    \n        if (transpose) {\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        } else {\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n        return array;\n    };\n    \n    /**\n     * 将坐标点与矩阵左乘\n     *\n     * @param pos {object} 原始点\n     * @param newPos {object} 变换之后的点\n     * @return {object} 返回数组\n     */\n    Matrix.prototype.apply = function(pos, newPos) {\n        newPos = newPos || {};\n        newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n        newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n        return newPos;\n    };\n    /**\n     * 将坐标点与转置矩阵左乘\n     *\n     * @param pos {object} 原始点\n     * @param newPos {object} 变换之后的点\n     * @return {object} 变换之后的点\n     */\n    Matrix.prototype.applyInverse = function(pos, newPos) {\n        var id = 1 / (this.a * this.d + this.c * -this.b);\n        newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n        newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n        return newPos;\n    };\n    /**\n     * 位移操作\n     *\n     * @return {this} \n     */\n    Matrix.prototype.translate = function(x, y) {\n        this.tx += x;\n        this.ty += y;\n        return this;\n    };\n    /**\n     * 缩放操作\n     *\n     * @return {this} \n     */\n    Matrix.prototype.scale = function(x, y) {\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n        return this;\n    };\n    /**\n     * 旋转操作\n     *\n     * @return {this} \n     */\n    Matrix.prototype.rotate = function(angle) {\n        var cos = Math.cos(angle);\n        var sin = Math.sin(angle);\n        var a1 = this.a;\n        var c1 = this.c;\n        var tx1 = this.tx;\n        this.a = a1 * cos - this.b * sin;\n        this.b = a1 * sin + this.b * cos;\n        this.c = c1 * cos - this.d * sin;\n        this.d = c1 * sin + this.d * cos;\n        this.tx = tx1 * cos - this.ty * sin;\n        this.ty = tx1 * sin + this.ty * cos;\n        return this;\n    };\n    /**\n     * 矩阵相乘\n     *\n     * @return {this} \n     */\n    Matrix.prototype.append = function(matrix) {\n        var a1 = this.a;\n        var b1 = this.b;\n        var c1 = this.c;\n        var d1 = this.d;\n        this.a = matrix.a * a1 + matrix.b * c1;\n        this.b = matrix.a * b1 + matrix.b * d1;\n        this.c = matrix.c * a1 + matrix.d * c1;\n        this.d = matrix.c * b1 + matrix.d * d1;\n        this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n        this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n        return this;\n    };\n    /**\n     * 单位矩阵\n     *\n     * @return {this} \n     */\n    Matrix.prototype.identity = function() {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n        return this;\n    };\n    /**\n     * 快速设置矩阵各个分量\n     *\n     * @return {this} \n     */\n    Matrix.prototype.setTransform = function(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n        var a, b, c, d, sr, cr, cy, sy, nsx, cx;\n    \n        sr = Math.sin(rotation);\n        cr = Math.cos(rotation);\n        cy = Math.cos(skewY);\n        sy = Math.sin(skewY);\n        nsx = -Math.sin(skewX);\n        cx = Math.cos(skewX);\n    \n        a = cr * scaleX;\n        b = sr * scaleX;\n        c = -sr * scaleY;\n        d = cr * scaleY;\n    \n        this.a = cy * a + sy * c;\n        this.b = cy * b + sy * d;\n        this.c = nsx * a + cx * c;\n        this.d = nsx * b + cx * d;\n    \n        this.tx = x + (pivotX * a + pivotY * c);\n        this.ty = y + (pivotX * b + pivotY * d);\n    \n        return this;\n    };\n    JC.IDENTITY = new Matrix();\n    JC.TEMP_MATRIX = new Matrix();\n    \n\n    function BaseTexture(source, scaleMode) {\n        JC.Eventer.call(this);\n    \n        this.width = 100;\n    \n        this.height = 100;\n    \n        this.realWidth = 100;\n    \n        this.realHeight = 100;\n    \n        this.scaleMode = scaleMode || JC.CONST.SCALE_MODES.DEFAULT;\n    \n        this.hasLoaded = false;\n    \n        this.isLoading = false;\n    \n        this.source = null; // set in loadSource, if at all\n    \n        this.resolution = 1;\n    \n        this.premultipliedAlpha = true;\n    \n        this.imageUrl = null;\n    \n        this.isPowerOfTwo = false;\n    \n        this.mipmap = false;\n    \n        // this._glTextures = {};\n    \n        // if no source passed don't try to load\n        if (source) {\n            this.loadSource(source);\n        }\n    \n    }\n    \n    BaseTexture.prototype = Object.create(JC.Eventer.prototype);\n    BaseTexture.prototype.constructor = BaseTexture;\n    \n    BaseTexture.prototype.update = function() {\n        this.realWidth = this.source.naturalWidth || this.source.width;\n        this.realHeight = this.source.naturalHeight || this.source.height;\n    \n        this.width = this.realWidth / this.resolution;\n        this.height = this.realHeight / this.resolution;\n    \n        this.isPowerOfTwo = JC.UTILS.isPowerOfTwo(this.realWidth, this.realHeight);\n    \n        this.emit({ type: 'update' });\n    };\n    \n    BaseTexture.prototype.loadSource = function(source) {\n        var wasLoading = this.isLoading;\n        this.hasLoaded = false;\n        this.isLoading = false;\n    \n        this.source = source;\n    \n        if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) {\n            this._sourceLoaded();\n        } else if (!source.getContext) {\n            this.isLoading = true;\n    \n            var This = this;\n    \n            source.onload = function() {\n                source.onload = null;\n                source.onerror = null;\n    \n                This.isLoading = false;\n                This._sourceLoaded();\n                This.emit({ type: 'loaded' });\n            };\n    \n            source.onerror = function() {\n                source.onload = null;\n                source.onerror = null;\n    \n                This.isLoading = false;\n                This.emit({ type: 'error' });\n            };\n    \n            if (source.complete && source.src) {\n                this.isLoading = false;\n    \n                source.onload = null;\n                source.onerror = null;\n    \n                if (source.width && source.height) {\n                    this._sourceLoaded();\n    \n                    // If any previous subscribers possible\n                    if (wasLoading) {\n                        this.emit({ type: 'loaded' });\n                    }\n                } else {\n                    // If any previous subscribers possible\n                    if (wasLoading) {\n                        this.emit({ type: 'error' });\n                    }\n                }\n            }\n        }\n    };\n    \n    BaseTexture.prototype._sourceLoaded = function() {\n        this.hasLoaded = true;\n        this.update();\n    };\n    BaseTexture.fromImage = function(imageUrl, crossorigin, scaleMode) {\n        var baseTexture = JC.UTILS.BaseTextureCache[imageUrl];\n    \n        if (crossorigin === undefined && imageUrl.indexOf('data:') !== 0) {\n            crossorigin = true;\n        }\n    \n        if (!baseTexture) {\n            var image = new Image();\n            if (crossorigin) {\n                image.crossOrigin = '';\n            }\n    \n            baseTexture = new BaseTexture(image, scaleMode);\n            baseTexture.imageUrl = imageUrl;\n    \n            image.src = imageUrl;\n    \n            JC.UTILS.BaseTextureCache[imageUrl] = baseTexture;\n    \n        }\n    \n        return baseTexture;\n    };\n    \n    function Texture(baseTexture, frame) {\n        JC.Eventer.call(this);\n    \n        this.noFrame = false;\n    \n        if (!frame) {\n            this.noFrame = true;\n            frame = new JC.Rectangle(0, 0, 1, 1);\n        }\n    \n        if (baseTexture instanceof Texture) {\n            baseTexture = baseTexture.baseTexture;\n        }\n    \n        this.baseTexture = baseTexture;\n    \n        this._frame = frame;\n    \n        this.valid = false;\n    \n        this.requiresUpdate = false;\n    \n        this._uvs = null;\n    \n        this.width = 0;\n    \n        this.height = 0;\n    \n        if (baseTexture.hasLoaded) {\n            if (this.noFrame) {\n                frame = new JC.Rectangle(0, 0, baseTexture.width, baseTexture.height);\n    \n                // if there is no frame we should monitor for any base texture changes..\n                baseTexture.on('update', this.onBaseTextureUpdated.bind(this));\n            }\n            this.frame = frame;\n        } else {\n            baseTexture.once('loaded', this.onBaseTextureLoaded.bind(this));\n        }\n    \n    }\n    JC.Texture = Texture;\n    Texture.prototype = Object.create(JC.Eventer.prototype);\n    Texture.prototype.constructor = Texture;\n    \n    Object.defineProperties(Texture.prototype, {\n        frame: {\n            get: function() {\n                return this._frame;\n            },\n            set: function(frame) {\n                this._frame = frame;\n    \n                this.noFrame = false;\n    \n                this.width = frame.width;\n                this.height = frame.height;\n    \n                this.valid = frame && frame.width && frame.height && this.baseTexture.hasLoaded;\n                if (this.valid) {\n                    this._updateUvs();\n                }\n            }\n        }\n    });\n    \n    Texture.prototype.update = function() {\n        this.baseTexture.update();\n    };\n    \n    Texture.prototype.onBaseTextureLoaded = function() {\n        // TODO this code looks confusing.. boo to abusing getters and setterss!\n        if (this.noFrame) {\n            this.frame = new JC.Rectangle(0, 0, this.baseTexture.width, this.baseTexture.height);\n        } else {\n            this.frame = this._frame;\n        }\n    \n        this.emit({type: 'loaded'});\n    };\n    \n    Texture.prototype.onBaseTextureUpdated = function() {\n        this._frame.width = this.baseTexture.width;\n        this._frame.height = this.baseTexture.height;\n    \n        this.emit({type: 'update'});\n    };\n    \n    Texture.prototype._updateUvs = function() {\n        if (!this._uvs) {\n            this._uvs = new TextureUvs();\n        }\n        this._uvs.set(this.frame, this.baseTexture);\n    };\n    \n    Texture.fromImage = function(imageUrl, crossorigin, scaleMode) {\n        var texture = JC.UTILS.TextureCache[imageUrl];\n    \n        if (!texture) {\n            texture = new Texture(BaseTexture.fromImage(imageUrl, crossorigin, scaleMode));\n            JC.UTILS.TextureCache[imageUrl] = texture;\n        }\n    \n        return texture;\n    };\n    \n    Texture.fromCanvas = function(canvas, scaleMode) {\n        return new Texture(BaseTexture.fromCanvas(canvas, scaleMode));\n    };\n    \n    function TextureUvs() {\n        this.x0 = 0;\n        this.y0 = 0;\n    \n        this.x1 = 1;\n        this.y1 = 0;\n    \n        this.x2 = 1;\n        this.y2 = 1;\n    \n        this.x3 = 0;\n        this.y3 = 1;\n    }\n    \n    TextureUvs.prototype.set = function(frame, baseFrame) {\n        var tw = baseFrame.width;\n        var th = baseFrame.height;\n    \n        this.x0 = frame.x / tw;\n        this.y0 = frame.y / th;\n    \n        this.x1 = (frame.x + frame.width) / tw;\n        this.y1 = frame.y / th;\n    \n        this.x2 = (frame.x + frame.width) / tw;\n        this.y2 = (frame.y + frame.height) / th;\n    \n        this.x3 = frame.x / tw;\n        this.y3 = (frame.y + frame.height) / th;\n    };\n    TextureUvs.prototype.get = function() {\n        return new Float32Array([\n            this.x0, this.y0, this.x1, this.y1,\n            this.x2, this.y2, this.x3, this.y3\n        ]);\n    };\n    \n\n    /**\n     * 显示对象的基类\n     *\n     * @class\n     * @memberof JC\n     */\n    function DisplayObject() {\n        this._ready = true;\n    \n        this.visible = true;\n        this.worldAlpha = 1;\n        this.alpha = 1;\n    \n        this.scaleX = 1;\n        this.scaleY = 1;\n    \n        this.skewX = 0;\n        this.skewY = 0;\n    \n        this.rotation = 0;\n        this.rotationCache = 0;\n        this._sr = 0;\n        this._cr = 1;\n    \n        this.x = 0;\n        this.y = 0;\n    \n        this.pivotX = 0;\n        this.pivotY = 0;\n    \n        this.mask = null;\n    \n        this.parent = null;\n        this.worldTransform = new JC.Matrix();\n    \n        this.event = new JC.Eventer();\n        this.passEvent = false;\n        this.bounds = [];\n    \n        this.Animator = new JC.Animator();\n    }\n    JC.DisplayObject = DisplayObject;\n    DisplayObject.prototype.constructor = JC.DisplayObject;\n    \n    Object.defineProperty(DisplayObject.prototype, 'scale', {\n        get: function() {\n            return this.scaleX;\n        },\n        set: function(scale) {\n            this.scaleX = this.scaleY = scale;\n        }\n    });\n    \n    /**\n     * fromTo动画，指定动画的启始位置和结束位置\n     *\n     * ```js\n     * // 扩展缓动函数，缓动函数库详见目录下的util/tween.js\n     * JC.TWEEN.extend({    \n     *    bounceOut: function(t, b, c, d){\n     *        if ((t/=d) < (1/2.75)) {\n     *            return c*(7.5625*t*t) + b;\n     *        } else if (t < (2/2.75)) {\n     *            return c*(7.5625*(t-=(1.5/2.75))*t + 0.75) + b;\n     *        } else if (t < (2.5/2.75)) {\n     *            return c*(7.5625*(t-=(2.25/2.75))*t + 0.9375) + b;\n     *        }\n     *        return c*(7.5625*(t-=(2.625/2.75))*t + 0.984375) + b;\n     *    }\n     * });\n     * var dispayObj = new JC.Text('Hello JC','bold 36px Arial','#c32361');\n     * dispayObj.fromTo({\n     *   from: {x: 100},\n     *   to: {x: 200},\n     *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n     *   repeats: 10, // 动画运动完后再重复10次\n     *   infinity: true, // 无限循环动画\n     *   alternate: true, // 偶数次的时候动画回放\n     *   duration: 1000, // 动画时长 ms单位 默认 300ms\n     *   onUpdate: function(state,rate){},\n     *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n     * });\n     * ```\n     *\n     * @param opts {object} 配置\n     * @param clear {boolean} 是否去掉之前的动画\n     */\n    DisplayObject.prototype.fromTo = function(opts, clear) {\n        opts.element = this;\n        this.setVal(opts.from);\n        if (clear) this.Animator.animates.length = 0;\n        return this.Animator.fromTo(opts);\n    };\n    \n    /**\n     * to动画，物体当前位置为动画的启始位置，只需制定动画的结束位置\n     *\n     * @param opts {object} 配置\n     * @param clear {boolean} 是否去掉之前的动画\n     */\n    DisplayObject.prototype.to = function(opts, clear) {\n        opts.element = this;\n        opts.from = {};\n        for (var i in opts.to) {\n            opts.from[i] = this[i];\n        }\n        if (clear) this.Animator.animates.length = 0;\n        return this.Animator.fromTo(opts);\n    };\n    \n    /**\n     * keyFrames动画，设置物体动画的keyframe，可以为相邻的两个keyFrames之前配置差值时间及时间函数\n     *\n     * @param opts {object} 配置\n     * @param clear {boolean} 是否去掉之前的动画\n     */\n    DisplayObject.prototype.keyFrames = function(opts, clear) {\n        opts.element = this;\n        if (clear) this.Animator.animates.length = 0;\n        return this.Animator.keyFrames(opts);\n    };\n    \n    /**\n     * 检测是否可见\n     *\n     * @method isVisible\n     * @private\n     */\n    DisplayObject.prototype.isVisible = function() {\n        return !!(this.visible && this.alpha > 0 && this.scaleX * this.scaleY > 0);\n    };\n    \n    DisplayObject.prototype.setVal = function(vals) {\n        if (vals === undefined) return;\n        for (var key in vals) {\n            if (this[key] === undefined) {\n                continue;\n            } else {\n                this[key] = vals[key];\n            }\n        }\n    };\n    DisplayObject.prototype.updateMe = function() {\n        var pt = this.parent.worldTransform;\n        var wt = this.worldTransform;\n    \n        var a, b, c, d, tx, ty;\n    \n        if (this.skewX || this.skewY) {\n    \n            JC.TEMP_MATRIX.setTransform(\n                this.x,\n                this.y,\n                this.pivotX,\n                this.pivotY,\n                this.scaleX,\n                this.scaleY,\n                this.rotation,\n                this.skewX,\n                this.skewY\n            );\n    \n            wt.a = JC.TEMP_MATRIX.a * pt.a + JC.TEMP_MATRIX.b * pt.c;\n            wt.b = JC.TEMP_MATRIX.a * pt.b + JC.TEMP_MATRIX.b * pt.d;\n            wt.c = JC.TEMP_MATRIX.c * pt.a + JC.TEMP_MATRIX.d * pt.c;\n            wt.d = JC.TEMP_MATRIX.c * pt.b + JC.TEMP_MATRIX.d * pt.d;\n            wt.tx = JC.TEMP_MATRIX.tx * pt.a + JC.TEMP_MATRIX.ty * pt.c + pt.tx;\n            wt.ty = JC.TEMP_MATRIX.tx * pt.b + JC.TEMP_MATRIX.ty * pt.d + pt.ty;\n        } else {\n            if (this.rotation % 360) {\n                if (this.rotation !== this.rotationCache) {\n                    this.rotationCache = this.rotation;\n                    this._sr = Math.sin(this.rotation * JC.CONST.DTR);\n                    this._cr = Math.cos(this.rotation * JC.CONST.DTR);\n                }\n    \n                a = this._cr * this.scaleX;\n                b = this._sr * this.scaleX;\n                c = -this._sr * this.scaleY;\n                d = this._cr * this.scaleY;\n                tx = this.x;\n                ty = this.y;\n    \n                if (this.pivotX || this.pivotY) {\n                    tx -= this.pivotX * a + this.pivotY * c;\n                    ty -= this.pivotX * b + this.pivotY * d;\n                }\n                wt.a = a * pt.a + b * pt.c;\n                wt.b = a * pt.b + b * pt.d;\n                wt.c = c * pt.a + d * pt.c;\n                wt.d = c * pt.b + d * pt.d;\n                wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n                wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n            } else {\n                a = this.scaleX;\n                d = this.scaleY;\n    \n                tx = this.x - this.pivotX * a;\n                ty = this.y - this.pivotY * d;\n    \n                wt.a = a * pt.a;\n                wt.b = a * pt.b;\n                wt.c = d * pt.c;\n                wt.d = d * pt.d;\n                wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n                wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n            }\n        }\n        this.worldAlpha = this.alpha * this.parent.worldAlpha;\n    };\n    \n    DisplayObject.prototype.upAnimation = function(snippet) {\n        this.Animator.update(snippet);\n    };\n    // DisplayObject.prototype.setTransform = function(ctx){\n    //     var matrix = this.worldTransform;\n    //     ctx.globalAlpha = this.worldAlpha;\n    //     ctx.setTransform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.tx,matrix.ty);\n    // };\n    /**\n     * 获取物体相对于canvas世界坐标系的坐标位置\n     *\n     * @return {object}\n     */\n    DisplayObject.prototype.getGlobalPos = function() {\n        return { x: this.worldTransform.tx, y: this.worldTransform.ty };\n    };\n    /**\n     * 显示对象的事件绑定函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 回调函数\n     */\n    DisplayObject.prototype.on = function(type, fn) {\n        this.event.on(type, fn);\n    };\n    /**\n     * 显示对象的事件解绑函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 注册时回调函数的引用\n     */\n    DisplayObject.prototype.off = function(type, fn) {\n        this.event.off(type, fn);\n    };\n    /**\n     * 显示对象的一次性事件绑定函数\n     *\n     * @param type {String} 事件类型\n     * @param fn {Function} 回调函数\n     */\n    DisplayObject.prototype.once = function(type, fn) {\n        this.event.once(type, cb);\n    };\n    /**\n     * 获取当前坐标系下的监测区域\n     *\n     * @method getBounds\n     * @private\n     */\n    DisplayObject.prototype.getBounds = function() {\n        var bounds = [],\n            l = this.bounds.length >> 1;\n    \n        for (var i = 0; i < l; i++) {\n            var p = this.worldTransform.apply({ x: this.bounds[i * 2], y: this.bounds[i * 2 + 1] });\n            bounds[i * 2] = p.x;\n            bounds[i * 2 + 1] = p.y;\n        }\n        return bounds;\n    };\n    /**\n     * 设置显示对象的监测区域\n     *\n     * @param points {Array} 区域的坐标点 [x0,y0 ..... xn,yn]\n     * @param needless {boolean} 当该值为true，当且仅当this.bounds为空时才会更新点击区域。默认为false，总是更新点击区域。\n     * @return {Array}\n     */\n    DisplayObject.prototype.setBounds = function(points, needless) {\n    };\n    DisplayObject.prototype.ContainsPoint = function(p, px, py) {\n        var n = p.length >> 1;\n        var ax, ay = p[2 * n - 3] - py,\n            bx = p[2 * n - 2] - px,\n            by = p[2 * n - 1] - py;\n    \n        //var lup = by > ay;\n        for (var i = 0; i < n; i++) {\n            ax = bx;\n            ay = by;\n            bx = p[2 * i] - px;\n            by = p[2 * i + 1] - py;\n            if (ay == by) continue;\n            lup = by > ay;\n        }\n    \n        var depth = 0;\n        for (i = 0; i < n; i++) {\n            ax = bx;\n            ay = by;\n            bx = p[2 * i] - px;\n            by = p[2 * i + 1] - py;\n            if (ay < 0 && by < 0) continue;\n            if (ay > 0 && by > 0) continue;\n            if (ax < 0 && bx < 0) continue;\n    \n            if (ay == by && Math.min(ax, bx) <= 0) return true;\n            if (ay == by) continue;\n    \n            var lx = ax + (bx - ax) * (-ay) / (by - ay);\n            if (lx === 0) return true;\n            if (lx > 0) depth++;\n            if (ay === 0 && lup && by > ay) depth--;\n            if (ay === 0 && !lup && by < ay) depth--;\n            lup = by > ay;\n        }\n        return (depth & 1) == 1;\n    };\n    \n    /**\n     * 显示对象容器，继承至DisplayObject\n     *\n     * ```js\n     * var container = new JC.Container();\n     * container.addChilds(sprite);\n     * ```\n     *\n     * @class\n     * @extends JC.DisplayObject\n     * @memberof JC\n     */\n    function Container() {\n        JC.DisplayObject.call(this);\n        this.cds = [];\n        this.timeScale = 1;\n        this.paused = false;\n    }\n    JC.Container = Container;\n    Container.prototype = Object.create(JC.DisplayObject.prototype);\n    Container.prototype.constructor = JC.Container;\n    \n    /**\n     * 向容器添加一个物体\n     * \n     * ```js\n     * container.addChilds(sprite,sprite2,text3,graphice);\n     * ```\n     *\n     * @param child {JC.Container}\n     * @return {JC.Container}\n     */\n    Container.prototype.addChilds = function(cd) {\n        if (cd === undefined) return cd;\n        var l = arguments.length;\n        if (l > 1) {\n            for (var i = 0; i < l; i++) { this.addChilds(arguments[i]); }\n            return arguments[l - 1];\n        }\n        if (cd.parent) { cd.parent.removeChilds(cd); }\n        cd.parent = this;\n        this.cds.push(cd);\n        return cd;\n    };\n    /**\n     * 从容器移除一个物体\n     * \n     * ```js\n     * container.removeChilds(sprite,sprite2,text3,graphice);\n     * ```\n     *\n     * @param child {JC.Container}\n     * @return {JC.Container}\n     */\n    Container.prototype.removeChilds = function() {\n        var l = arguments.length;\n        if (l > 1) {\n            for (var i = 0; i < l; i++) { this.removeChilds(arguments[i]); }\n        } else if (l === 1) {\n            for (var a = 0; a < this.cds.length; a++) {\n                if (this.cds[a] === arguments[0]) {\n                    this.cds.splice(a, 1);\n                    this.cds[a].parent = null;\n                    a--;\n                }\n            }\n        }\n    };\n    Container.prototype.updateTransform = function(snippet) {\n        if (!this._ready) return;\n        snippet = this.timeScale * snippet;\n        !this.paused && this.upAnimation(snippet);\n        this.updateMe();\n        this.cds.length > 0 && this.updateChilds(snippet);\n    };\n    Container.prototype.updateChilds = function(snippet) {\n        for (var i = 0, l = this.cds.length; i < l; i++) {\n            var cd = this.cds[i];\n            cd.updateTransform(snippet);\n        }\n    };\n    Container.prototype.render = function(session) {\n        this.renderMe(session);\n        this.cds.length > 0 && this.renderChilds(session);\n    };\n    Container.prototype.renderMe = function() {\n        return true;\n    };\n    Container.prototype.renderChilds = function(session) {\n        for (var i = 0, l = this.cds.length; i < l; i++) {\n            var cd = this.cds[i];\n            if (!cd.isVisible() || !cd._ready) continue;\n            cd.render(session);\n        }\n    };\n    Container.prototype.noticeEvent = function(ev) {\n        var i = this.cds.length - 1;\n        while (i >= 0) {\n            var child = this.cds[i];\n            if (child.visible) {\n                child.noticeEvent(ev);\n                if (ev.target) break;\n            }\n            i--;\n        }\n        this.upEvent(ev);\n    };\n    Container.prototype.upEvent = function(ev) {\n        if (!this._ready) return;\n        if (ev.target || (!this.passEvent && this.hitTest(ev))) {\n            if (!ev.cancleBubble || ev.target === this) {\n                if (!(this.event.listeners[ev.type] && this.event.listeners[ev.type].length > 0)) return;\n                this.event.emit(ev);\n            }\n        }\n    };\n    Container.prototype.hitTest = function(ev) {\n        if (ev.type === 'touchmove' || ev.type === 'touchend' || ev.type === 'mousemove' || ev.type === 'mouseup') {\n            var re = this.event.touchstarted;\n            if (re) ev.target = this;\n            if (ev.type === 'touchend' || ev.type === 'mouseup') this.event.touchstarted = false;\n            return re;\n        }\n        if (this.hitTestMe(ev)) {\n            ev.target = this;\n            if (ev.type === 'touchstart' || ev.type === 'mousedown') this.event.touchstarted = true;\n            return true;\n        }\n        return false;\n    };\n    Container.prototype.hitTestMe = function(ev) {\n        return this.ContainsPoint(this.getBound(), ev.global.x, ev.global.y);\n    };\n    Container.prototype.pause = function() {\n        this.paused = true;\n    };\n    Container.prototype.start = function() {\n        this.paused = false;\n    };\n    Container.prototype.cancle = function() {\n        this.Animator.animates.length = 0;\n    };\n    \n\n    function Sprite(texture) {\n        JC.Container.call(this);\n    \n        this._ready = false;\n    \n        this.regX = 0;\n    \n        this.regY = 0;\n    \n        this._texture = null;\n    \n        this.tint = 0xFFFFFF;\n    \n        this.blendMode = JC.CONST.BLEND_MODES.NORMAL;\n    \n        this.shaderType = 'sprite';\n    \n        this.cachedTint = 0xFFFFFF;\n    \n        this.cachedAlpha = this.alpha;\n    \n        this.vertices = null;\n    \n        this.indices = new Uint16Array([0,1,2,0,2,3]);\n    \n        this.colors = null;\n    \n        this.dynamicStride = 0;\n        this.dynamicBuffer = null;\n        this.dynamicData = null;\n    \n        this.indexBuffer = null;\n    \n        this.texture = texture;\n    \n        this.update = false;\n    \n    }\n    \n    JC.Sprite = Sprite;\n    Sprite.prototype = Object.create(JC.Container.prototype);\n    Sprite.prototype.constructor = JC.Sprite;\n    \n    Object.defineProperties(Sprite.prototype, {\n        texture: {\n            get: function() {\n                return this._texture;\n            },\n            set: function(value) {\n                if (this._texture === value) {\n                    return;\n                }\n    \n                this._texture = value;\n                this.cachedTint = 0xFFFFFF;\n    \n    \n                if (value) {\n                    // wait for the texture to load\n                    if (value.baseTexture.hasLoaded) {\n                        this.upTexture();\n                        this._ready = true;\n                    } else {\n                        var This = this;\n                        value.on('loaded', function() {\n                            This.upTexture();\n                            This._ready = true;\n                        });\n                    }\n                }\n            }\n        },\n        aColor: {\n            get: function() {\n                if (this.tint === this.cachedTint && this.cachedAlpha === this.alpha && this.colors) return this.colors;\n                this.cachedTint = this.tint;\n                this.cachedAlpha = this.alpha;\n                this.colors = new Float32Array(JC.UTILS.hex2rgb(this.tint).concat([this.alpha]));\n                return this.colors;\n            }\n        }\n    });\n    \n    Sprite.prototype.upTexture = function() {\n        this.width = this.texture.width;\n        this.height = this.texture.height;\n        this.regX = this.width >> 1;\n        this.regY = this.height >> 1;\n    \n        this.vertices = new Float32Array([-this.regX, this.regY, this.width - this.regX, this.regY, this.width - this.regX, this.regY - this.height, -this.regX, this.regY - this.height]);\n        this.setBounds(null, true);\n    };\n    \n    Sprite.prototype.setBounds = function(points, needless) {\n        var l = this.bounds.length;\n        if (l > 4 && needless) return;\n        points = points || this.vertices;\n        this.bounds = points;\n    };\n    \n    Sprite.prototype.renderMe = function(session) {\n        if(!this._ready)return;\n        session.blendModeManager.setBlendMode(this.blendMode);\n        session.shaderManager.setShader(this.shaderType);\n        var shader = session.shaderManager.currentShader;\n        shader.uniforms.projectionMatrix.value = this.worldTransform.toArray(true);\n        shader.uniforms.projectionVector.value = session.projection;\n        shader.uniforms.uSampler.value = this.texture;\n        shader.syncUniforms();\n        var gl = session.gl;\n    \n        if(!this.dynamicBuffer)this.initBuffers(gl,shader);\n        this.uploadDynamic(gl);\n        this.bindBuffers(gl,shader);\n    \n        gl.drawElements(gl.TRIANGLES, this.indices.length, gl.UNSIGNED_SHORT, 0);\n    \n    };\n    Sprite.prototype.initBuffers = function(gl, shader) {\n        var i;\n        var property;\n    \n        var dynamicOffset = 0;\n        this.dynamicStride = 0;\n    \n        for (i in shader.attributes) {\n            property = shader.attributes[i];\n    \n            property.offset = dynamicOffset;\n            dynamicOffset += property.size;\n            this.dynamicStride += property.size;\n        }\n    \n        this.dynamicData = new Float32Array(this.dynamicStride * 4);\n        this.dynamicBuffer = gl.createBuffer();\n    \n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, this.dynamicData, gl.DYNAMIC_DRAW);\n    \n    \n    \n        this.indexBuffer = gl.createBuffer();\n    \n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);\n    };\n    \n    Sprite.prototype.bindBuffers = function(gl,shader) {\n        var i,property;\n            \n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n    \n        for (i in shader.attributes) {\n            property = shader.attributes[i];\n            gl.enableVertexAttribArray(property._location);\n            gl.vertexAttribPointer(property._location, property.size, gl.FLOAT, false, this.dynamicStride * 4, property.offset * 4);\n        }\n    \n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    };\n    Sprite.prototype.uploadDynamic = function(gl) {\n    \n        var uvs = this.texture._uvs.get();\n    \n        if(!this.update){\n            for(var i = 0;i<4;i++){\n                this.dynamicData[i*this.dynamicStride] = this.vertices[i*2];\n                this.dynamicData[i*this.dynamicStride+1] = this.vertices[i*2+1];\n    \n                this.dynamicData[i*this.dynamicStride+2] = uvs[i*2];\n                this.dynamicData[i*this.dynamicStride+3] = uvs[i*2+1];\n    \n    \n                this.dynamicData[i*this.dynamicStride+4] = this.aColor[0];\n                this.dynamicData[i*this.dynamicStride+5] = this.aColor[1];\n                this.dynamicData[i*this.dynamicStride+6] = this.aColor[2];\n                this.dynamicData[i*this.dynamicStride+7] = this.aColor[3];\n            }\n            this.update = true;\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n        gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.dynamicData);\n    \n    };\n    \n    Sprite.prototype.getBounds = function() {\n    \n    };\n    \n    \n    Sprite.prototype.containsPoint = function(point) {\n        return true;\n    };\n    \n\n    function ParticleContainer(maxSize, properties, batchSize) {\n        JC.Container.call(this);\n    \n        batchSize = batchSize || 15000; //CONST.SPRITE_BATCH_SIZE; // 2000 is a nice balance between mobile / desktop\n        maxSize = maxSize || 15000;\n    \n        // Making sure the batch size is valid\n        // 65535 is max vertex index in the index buffer (see ParticleRenderer)\n        // so max number of particles is 65536 / 4 = 16384\n        var maxBatchSize = 16384;\n        if (batchSize > maxBatchSize) {\n            batchSize = maxBatchSize;\n        }\n    \n        if (batchSize > maxSize) {\n            batchSize = maxSize;\n        }\n    \n        /**\n         * Set properties to be dynamic (true) / static (false)\n         *\n         * @member {boolean[]}\n         * @private\n         */\n        this._properties = [false, true, false, false, false];\n    \n        /**\n         * @member {number}\n         * @private\n         */\n        this._maxSize = maxSize;\n    \n        /**\n         * @member {number}\n         * @private\n         */\n        this._batchSize = batchSize;\n    \n        /**\n         * @member {WebGLBuffer}\n         * @private\n         */\n        this._buffers = null;\n    \n        /**\n         * @member {number}\n         * @private\n         */\n        this._bufferToUpdate = 0;\n    \n        /**\n         * @member {boolean}\n         *\n         */\n        this.interactiveChildren = false;\n    \n        /**\n         * The blend mode to be applied to the sprite. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.\n         *\n         * @member {number}\n         * @default PIXI.BLEND_MODES.NORMAL\n         * @see PIXI.BLEND_MODES\n         */\n        this.blendMode = JC.CONST.BLEND_MODES.NORMAL;\n    \n        this.setProperties(properties);\n    }\n    \n    JC.ParticleContainer = ParticleContainer;\n    ParticleContainer.prototype = Object.create(JC.Container.prototype);\n    ParticleContainer.prototype.constructor = JC.ParticleContainer;\n    \n    /**\n     * Sets the private properties array to dynamic / static based on the passed properties object\n     *\n     * @param properties {object} The properties to be uploaded\n     */\n    ParticleContainer.prototype.setProperties = function(properties) {\n        if (properties) {\n            this._properties[0] = 'scale' in properties ? !!properties.scale : this._properties[0];\n            this._properties[1] = 'position' in properties ? !!properties.position : this._properties[1];\n            this._properties[2] = 'rotation' in properties ? !!properties.rotation : this._properties[2];\n            this._properties[3] = 'uvs' in properties ? !!properties.uvs : this._properties[3];\n            this._properties[4] = 'alpha' in properties ? !!properties.alpha : this._properties[4];\n        }\n    };\n    \n    ParticleContainer.prototype.updateTransform = function() {\n    \n        this.displayObjectUpdateTransform();\n    };\n    \n    ParticleContainer.prototype.render = function(session) {\n        if (!this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable) {\n            return;\n        }\n    \n        renderer.setObjectRenderer(renderer.plugins.particle);\n        renderer.plugins.particle.render(this);\n    };\n    \n\n    \n\n    function Renderer(view, options) {\n        options = options || {};\n    \n        if (options) {\n            for (var i in JC.CONST.DEFAULT_RENDER_OPTIONS) {\n                if (typeof options[i] === 'undefined') {\n                    options[i] = JC.CONST.DEFAULT_RENDER_OPTIONS[i];\n                }\n            }\n        } else {\n            options = JC.CONST.DEFAULT_RENDER_OPTIONS;\n        }\n    \n        this.view = typeof view !== 'string' ? view : document.getElementById(view);\n    \n        this.width = this.view.width;\n        this.height = this.view.height;\n    \n        this.projection = new Float32Array([this.width >> 1, this.height >> 1]);\n    \n        this.resolution = options.resolution;\n    \n        this.transparent = options.transparent;\n    \n        this.autoResize = options.autoResize || false;\n    \n        this.blendModes = null;\n    \n        this.preserveDrawingBuffer = options.preserveDrawingBuffer;\n    \n        this.autoClear = options.autoClear;\n    \n        this._backgroundColor = 0x000000;\n    \n        this._backgroundColorRgb = [0, 0, 0];\n    \n        this._backgroundColorString = '#000000';\n    \n        this.backgroundColor = options.backgroundColor || this._backgroundColor;\n    \n    \n        this.handleContextLost = this.handleContextLost.bind(this);\n        this.handleContextRestored = this.handleContextRestored.bind(this);\n    \n        this.view.addEventListener('webglcontextlost', this.handleContextLost, false);\n        this.view.addEventListener('webglcontextrestored', this.handleContextRestored, false);\n    \n        this._contextOptions = {\n            alpha: this.transparent,\n            antialias: options.antialias,\n            premultipliedAlpha: this.transparent && this.transparent !== 'notMultiplied',\n            stencil: true,\n            preserveDrawingBuffer: options.preserveDrawingBuffer\n        };\n    \n        // this.drawCount = 0;\n        this.event = new JC.Eventer();\n    \n        this._createContext();\n        this._initContext();\n    \n        this._mapGlModes();\n    \n    \n        this.shaderManager = new JC.ShaderManager(this);\n    \n        this.blendModeManager = new JC.BlendModeManager(this);\n    \n        this.renderSession = {};\n        this.renderSession.gl = this.gl;\n        this.renderSession.drawCount = 0;\n        this.renderSession.shaderManager = this.shaderManager;\n        this.renderSession.blendModeManager = this.blendModeManager;\n        this.renderSession.renderer = this;\n        this.renderSession.resolution = this.resolution;\n    \n        this._tempDisplayObjectParent = {worldTransform: JC.IDENTITY, worldAlpha:1, children:[]};\n    \n        this.pt = -1;\n        this.timeScale = 1;\n    }\n    \n    // constructor\n    JC.Renderer = Renderer;\n    Renderer.prototype.constructor = JC.Renderer;\n    \n    Renderer.prototype._createContext = function() {\n        var gl = this.view.getContext('webgl', this._contextOptions) || this.view.getContext('experimental-webgl', this._contextOptions);\n        this.gl = gl;\n    \n        if (!gl) {\n            throw new Error('This browser does not support webGL. Try using the canvas renderer');\n        }\n    \n        gl.renderer = this;\n    };\n    \n    Renderer.prototype._initContext = function() {\n        var gl = this.gl;\n    \n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.CULL_FACE);\n        gl.enable(gl.BLEND);\n    \n        this.event.emit({type: 'context'}, gl);\n    \n        this.resize(this.width, this.height);\n    \n    };\n    \n    Renderer.prototype.render = function(object) {\n        if(this.pt<=0||Date.now()-this.pt>200)this.pt = Date.now();\n        var snippet = Date.now()-this.pt;\n        this.pt += snippet;\n    \n        this.event.emit({type: 'prerender'});\n    \n        if (this.gl.isContextLost()) {\n            return;\n        }\n    \n        // this.drawCount = 0;\n        this.renderSession.projection = this.projection;\n        var cacheParent = object.parent;\n        object.parent = this._tempDisplayObjectParent;\n        object.updateTransform(this.timeScale*snippet);\n        object.parent = cacheParent;\n    \n        var gl = this.gl;\n    \n    \n        if (this.autoClear) {\n            if (this.transparent) {\n                gl.clearColor(0, 0, 0, 0);\n            } else {\n                gl.clearColor(this._backgroundColorRgb[0], this._backgroundColorRgb[1], this._backgroundColorRgb[2], 1);\n            }\n            gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n    \n        this.renderDisplayObject(object);\n    \n        this.event.emit({type: 'postrender'});\n    };\n    \n    Renderer.prototype.renderDisplayObject = function(displayObject) {\n        displayObject.render(this.renderSession);\n    };\n    \n    Renderer.prototype.handleContextLost = function(event) {\n        event.preventDefault();\n    };\n    \n    Renderer.prototype.handleContextRestored = function() {\n        this._initContext();\n    };\n    \n    Renderer.prototype._mapGlModes = function() {\n        var gl = this.gl;\n    \n        if (!this.blendModes) {\n            this.blendModes = {};\n    \n            this.blendModes[JC.CONST.BLEND_MODES.NORMAL] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n            this.blendModes[JC.CONST.BLEND_MODES.ADD] = [gl.ONE, gl.DST_ALPHA];\n            this.blendModes[JC.CONST.BLEND_MODES.MULTIPLY] = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA];\n            this.blendModes[JC.CONST.BLEND_MODES.SCREEN] = [gl.ONE, gl.ONE_MINUS_SRC_COLOR];\n        }\n    \n        if (!this.drawModes) {\n            this.drawModes = {};\n    \n            this.drawModes[JC.CONST.DRAW_MODES.POINTS] = gl.POINTS;\n            this.drawModes[JC.CONST.DRAW_MODES.LINES] = gl.LINES;\n            this.drawModes[JC.CONST.DRAW_MODES.LINE_LOOP] = gl.LINE_LOOP;\n            this.drawModes[JC.CONST.DRAW_MODES.LINE_STRIP] = gl.LINE_STRIP;\n            this.drawModes[JC.CONST.DRAW_MODES.TRIANGLES] = gl.TRIANGLES;\n            this.drawModes[JC.CONST.DRAW_MODES.TRIANGLE_STRIP] = gl.TRIANGLE_STRIP;\n            this.drawModes[JC.CONST.DRAW_MODES.TRIANGLE_FAN] = gl.TRIANGLE_FAN;\n        }\n    };\n    \n    Object.defineProperties(Renderer.prototype, {\n        backgroundColor: {\n            get: function() {\n                return this._backgroundColor;\n            },\n            set: function(val) {\n                this._backgroundColor = val;\n                this._backgroundColorString = JC.UTILS.hex2string(val);\n                JC.UTILS.hex2rgb(val, this._backgroundColorRgb);\n            }\n        }\n    });\n    \n    Renderer.prototype.resize = function(width, height) {\n        this.width = width * this.resolution;\n        this.height = height * this.resolution;\n    \n        this.view.width = this.width;\n        this.view.height = this.height;\n        this.gl.viewport(0, 0, this.width, this.height);\n    \n        this.projection = new Float32Array([this.width >> 1, this.height >> 1]);\n    \n        if (this.autoResize) {\n            this.view.style.width = this.width / this.resolution + 'px';\n            this.view.style.height = this.height / this.resolution + 'px';\n        }\n    };\n    \n    function ShaderManager(renderer) {\n    \n        this.renderer = renderer;\n    \n        this.shaderType = '';\n    \n        this.currentShader = null;\n    \n        this.init();\n    }\n    JC.ShaderManager = ShaderManager;\n    ShaderManager.prototype.constructor = JC.ShaderManager;\n    \n    ShaderManager.prototype.init = function() {\n    \n        var gl = this.renderer.gl;\n    \n        this.maxAttibs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n    \n        this.shaderPool = {\n            particle: new ParticleShader(gl),\n            sprite: new SpriteShader(gl),\n            graphics: new GraphicsShader(gl),\n            // text: new TextShader(gl)\n        };\n    };\n    \n    ShaderManager.prototype.setShader = function(shaderType) {\n        if (this.shaderType === shaderType) {\n            return false;\n        }\n    \n        this.currentShader = this.shaderPool[shaderType];\n    \n        this.renderer.gl.useProgram(this.currentShader.program);\n    \n        this.shaderType = shaderType;\n    \n        return true;\n    };\n    \n    function BlendModeManager(renderer) {\n        this.renderer = renderer;\n    \n        this.currentBlendMode = 99999;\n    }\n    JC.BlendModeManager = BlendModeManager;\n    BlendModeManager.prototype.constructor = JC.BlendModeManager;\n    BlendModeManager.prototype.setBlendMode = function(blendMode) {\n        if (this.currentBlendMode === blendMode) {\n            return false;\n        }\n    \n        this.currentBlendMode = blendMode;\n    \n        var mode = this.renderer.blendModes[this.currentBlendMode];\n        this.renderer.gl.blendFunc(mode[0], mode[1]);\n    \n        return true;\n    };\n    \n    function Shader(gl, vertexSrc, fragmentSrc, uniforms, attributes) {\n        if (!vertexSrc || !fragmentSrc) {\n            throw new Error('jcw2d.js Error. Shader requires vertexSrc and fragmentSrc');\n        }\n    \n        this.type = '';\n    \n        this.gl = gl;\n    \n        this.program = null;\n    \n        this.uniforms = uniforms || {};\n    \n        this.attributes = attributes || {};\n    \n        this.textureCount = 1;\n    \n        this.MAX_TEXTURE_UNITS = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n    \n        this.vertexSrc = vertexSrc;\n    \n        this.fragmentSrc = fragmentSrc;\n    \n        this.init();\n    }\n    \n    Shader.prototype.constructor = Shader;\n    \n    Shader.prototype.init = function() {\n        this.compile();\n    \n        this.gl.useProgram(this.program);\n    \n        this.cacheUniformLocations(Object.keys(this.uniforms));\n        this.cacheAttributeLocations(Object.keys(this.attributes));\n    };\n    \n    Shader.prototype.cacheUniformLocations = function(keys) {\n        for (var i = 0; i < keys.length; ++i) {\n            this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n        }\n    };\n    \n    Shader.prototype.cacheAttributeLocations = function(keys) {\n        for (var i = 0; i < keys.length; ++i) {\n            this.attributes[keys[i]]._location = this.gl.getAttribLocation(this.program, keys[i]);\n        }\n    };\n    \n    Shader.prototype.compile = function() {\n        var gl = this.gl;\n    \n        var glVertShader = this._glCompile(gl.VERTEX_SHADER, this.vertexSrc);\n        var glFragShader = this._glCompile(gl.FRAGMENT_SHADER, this.fragmentSrc);\n    \n        var program = gl.createProgram();\n    \n        gl.attachShader(program, glVertShader);\n        gl.attachShader(program, glFragShader);\n        gl.linkProgram(program);\n    \n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n            console.error('jcw2d.js Error: Could not initialize shader.');\n            console.error('gl.VALIDATE_STATUS', gl.getProgramParameter(program, gl.VALIDATE_STATUS));\n            console.error('gl.getError()', gl.getError());\n    \n            if (gl.getProgramInfoLog(program) !== '') {\n                console.warn('jcw2d.js Warning: gl.getProgramInfoLog()', gl.getProgramInfoLog(program));\n            }\n    \n            gl.deleteProgram(program);\n            program = null;\n        }\n    \n        // clean up some shaders\n        gl.deleteShader(glVertShader);\n        gl.deleteShader(glFragShader);\n    \n        return (this.program = program);\n    };\n    \n    Shader.prototype.syncUniform = function(uniform) {\n        var location = uniform._location,\n            value = uniform.value,\n            gl = this.gl,\n            i, il;\n    \n        switch (uniform.type) {\n            case 'b':\n            case 'bool':\n            case 'boolean':\n                gl.uniform1i(location, value ? 1 : 0);\n                break;\n    \n                // single int value\n            case 'i':\n            case '1i':\n                gl.uniform1i(location, value);\n                break;\n    \n                // single float value\n            case 'f':\n            case '1f':\n                gl.uniform1f(location, value);\n                break;\n    \n                // Float32Array(2) or JS Arrray\n            case '2f':\n                gl.uniform2f(location, value[0], value[1]);\n                break;\n    \n                // Float32Array(3) or JS Arrray\n            case '3f':\n                gl.uniform3f(location, value[0], value[1], value[2]);\n                break;\n    \n                // Float32Array(4) or JS Arrray\n            case '4f':\n                gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n                break;\n    \n                // a 2D Point object\n            case 'v2':\n                gl.uniform2f(location, value.x, value.y);\n                break;\n    \n                // a 3D Point object\n            case 'v3':\n                gl.uniform3f(location, value.x, value.y, value.z);\n                break;\n    \n                // a 4D Point object\n            case 'v4':\n                gl.uniform4f(location, value.x, value.y, value.z, value.w);\n                break;\n    \n                // Int32Array or JS Array\n            case '1iv':\n                gl.uniform1iv(location, value);\n                break;\n    \n                // Int32Array or JS Array\n            case '2iv':\n                gl.uniform2iv(location, value);\n                break;\n    \n                // Int32Array or JS Array\n            case '3iv':\n                gl.uniform3iv(location, value);\n                break;\n    \n                // Int32Array or JS Array\n            case '4iv':\n                gl.uniform4iv(location, value);\n                break;\n    \n                // Float32Array or JS Array\n            case '1fv':\n                gl.uniform1fv(location, value);\n                break;\n    \n                // Float32Array or JS Array\n            case '2fv':\n                gl.uniform2fv(location, value);\n                break;\n    \n                // Float32Array or JS Array\n            case '3fv':\n                gl.uniform3fv(location, value);\n                break;\n    \n                // Float32Array or JS Array\n            case '4fv':\n                gl.uniform4fv(location, value);\n                break;\n    \n                // Float32Array or JS Array\n            case 'm2':\n            case 'mat2':\n            case 'Matrix2fv':\n                gl.uniformMatrix2fv(location, uniform.transpose||false, value);\n                break;\n    \n                // Float32Array or JS Array\n            case 'm3':\n            case 'mat3':\n            case 'Matrix3fv':\n    \n                gl.uniformMatrix3fv(location, uniform.transpose||false, value);\n                break;\n    \n                // Float32Array or JS Array\n            case 'm4':\n            case 'mat4':\n            case 'Matrix4fv':\n                gl.uniformMatrix4fv(location, uniform.transpose||false, value);\n                break;\n    \n                // a Color Value\n            case 'c':\n                if (typeof value === 'number') {\n                    value = utils.hex2rgb(value);\n                }\n    \n                gl.uniform3f(location, value[0], value[1], value[2]);\n                break;\n    \n                // flat array of integers (JS or typed array)\n            case 'iv1':\n                gl.uniform1iv(location, value);\n                break;\n    \n                // flat array of integers with 3 x N size (JS or typed array)\n            case 'iv':\n                gl.uniform3iv(location, value);\n                break;\n    \n                // flat array of floats (JS or typed array)\n            case 'fv1':\n                gl.uniform1fv(location, value);\n                break;\n    \n                // flat array of floats with 3 x N size (JS or typed array)\n            case 'fv':\n                gl.uniform3fv(location, value);\n                break;\n    \n                // array of 2D Point objects\n            case 'v2v':\n                if (!uniform._array) {\n                    uniform._array = new Float32Array(2 * value.length);\n                }\n    \n                for (i = 0, il = value.length; i < il; ++i) {\n                    uniform._array[i * 2] = value[i].x;\n                    uniform._array[i * 2 + 1] = value[i].y;\n                }\n    \n                gl.uniform2fv(location, uniform._array);\n                break;\n    \n                // array of 3D Point objects\n            case 'v3v':\n                if (!uniform._array) {\n                    uniform._array = new Float32Array(3 * value.length);\n                }\n    \n                for (i = 0, il = value.length; i < il; ++i) {\n                    uniform._array[i * 3] = value[i].x;\n                    uniform._array[i * 3 + 1] = value[i].y;\n                    uniform._array[i * 3 + 2] = value[i].z;\n    \n                }\n    \n                gl.uniform3fv(location, uniform._array);\n                break;\n    \n                // array of 4D Point objects\n            case 'v4v':\n                if (!uniform._array) {\n                    uniform._array = new Float32Array(4 * value.length);\n                }\n    \n                for (i = 0, il = value.length; i < il; ++i) {\n                    uniform._array[i * 4] = value[i].x;\n                    uniform._array[i * 4 + 1] = value[i].y;\n                    uniform._array[i * 4 + 2] = value[i].z;\n                    uniform._array[i * 4 + 3] = value[i].w;\n    \n                }\n    \n                gl.uniform4fv(location, uniform._array);\n                break;\n    \n                // PIXI.Texture\n            case 't':\n            case 'sampler2D':\n    \n                if (!uniform.value || !uniform.value.baseTexture.hasLoaded) {\n                    break;\n                }\n    \n                // activate this texture\n                gl.activeTexture(gl['TEXTURE' + this.textureCount]);\n    \n                var texture = uniform.value.baseTexture.texture;\n    \n                if (!texture) {\n                    this.initSampler2D(uniform);\n    \n                    // set the textur to the newly created one..\n                    texture = uniform.value.baseTexture.texture;\n                }\n    \n                // bind the texture\n                gl.bindTexture(gl.TEXTURE_2D, texture);\n    \n                // set uniform to texture index\n                gl.uniform1i(uniform._location, this.textureCount);\n    \n                // increment next texture id\n                this.textureCount++;\n    \n                break;\n    \n            default:\n                console.warn('jcw2d.js Shader Warning: Unknown uniform type: ' + uniform.type);\n        }\n    };\n    \n    Shader.prototype.syncUniforms = function() {\n        this.textureCount = 1;\n    \n        for (var key in this.uniforms) {\n            this.syncUniform(this.uniforms[key]);\n        }\n    };\n    \n    Shader.prototype.initSampler2D = function(uniform) {\n        var gl = this.gl;\n    \n        var texture = uniform.value.baseTexture;\n    \n        if (!texture.hasLoaded) {\n            return;\n        }\n    \n        this.updateTexture(texture);\n    };\n    \n    Shader.prototype.updateTexture = function(texture) {\n        texture = texture.baseTexture || texture;\n    \n        if (!texture.hasLoaded) {\n            return;\n        }\n    \n        var gl = this.gl;\n    \n        if (!texture.texture) {\n            texture.texture = gl.createTexture();\n            texture.on('update', this.updateTexture, this);\n        }\n    \n    \n        gl.bindTexture(gl.TEXTURE_2D, texture.texture);\n    \n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultipliedAlpha);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);\n    \n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);\n    \n    \n        if (texture.mipmap && texture.isPowerOfTwo) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\n            gl.generateMipmap(gl.TEXTURE_2D);\n        } else {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);\n        }\n    \n        if (!texture.isPowerOfTwo) {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        } else {\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n        }\n    \n        return texture.texture;\n    };\n    \n    Shader.prototype._glCompile = function(type, src) {\n        var shader = this.gl.createShader(type);\n    \n        this.gl.shaderSource(shader, src);\n        this.gl.compileShader(shader);\n    \n        if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n            console.log(this.gl.getShaderInfoLog(shader));\n            return null;\n        }\n    \n        return shader;\n    };\n    \n    function SpriteShader(gl) {\n        var uniforms = {\n            uSampler: { type: 'sampler2D', value: 0 },\n            projectionMatrix: {\n                type: 'mat3',\n                value: new Float32Array([1, 0, 0,\n                    0, 1, 0,\n                    0, 0, 1\n                ])\n            },\n            projectionVector: {\n                type: '2fv',\n                value: new Float32Array([1, 1])\n            }\n        };\n    \n        var attributes = {\n            aVertexPosition: {\n                size: 2,\n            },\n            aTextureCoord: {\n                size: 2,\n            },\n            aColor: {\n                size: 4,\n            }\n        };\n    \n        var vertexSrc = [\n            'precision highp float;',\n            'attribute vec2 aVertexPosition;',\n            'attribute vec2 aTextureCoord;',\n            'attribute vec4 aColor;',\n    \n            'uniform mat3 projectionMatrix;',\n            'uniform vec2 projectionVector;',\n    \n            'varying vec2 vTextureCoord;',\n            'varying vec4 vColor;',\n    \n            'void main(void){',\n            '   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy / projectionVector, 0.0, 1.0);',\n            '   vTextureCoord = aTextureCoord;',\n            '   vColor = vec4(aColor.rgb * aColor.a, aColor.a);',\n            '}'\n        ].join('\\n');\n    \n        var fragmentSrc = [\n            'precision highp float;',\n    \n            'varying vec2 vTextureCoord;',\n            'varying vec4 vColor;',\n    \n            'uniform sampler2D uSampler;',\n    \n            'void main(void){',\n            '   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;',\n            '}'\n        ].join('\\n');\n    \n    \n        Shader.call(this, gl, vertexSrc, fragmentSrc, uniforms, attributes);\n    }\n    \n    // constructor\n    SpriteShader.prototype = Object.create(Shader.prototype);\n    SpriteShader.prototype.constructor = SpriteShader;\n    \n    function ParticleShader(gl) {\n        var uniforms = {\n            uAlpha: { type: '1f', value: 1 },\n            uSampler: { type: 'sampler2D', value: 0 },\n            projectionMatrix: {\n                type: 'mat3',\n                value: new Float32Array([1, 0, 0,\n                    0, 1, 0,\n                    0, 0, 1\n                ])\n            },\n            projectionVector: {\n                type: '2fv',\n                value: new Float32Array([1, 1])\n            }\n        };\n    \n    \n    \n        var attributes = {\n            aVertexPosition: 0,\n            aTextureCoord: 0,\n            aAlpha: 0,\n            aPositionCoord: 0,\n            aRotation: 0\n        };\n    \n        var vertexSrc = [\n            'precision lowp float;',\n    \n            'attribute vec2 aVertexPosition;',\n            'attribute vec2 aTextureCoord;',\n            'attribute float aAlpha;',\n    \n            'attribute vec2 aPositionCoord;',\n            'attribute float aRotation;',\n    \n            'uniform mat3 projectionMatrix;',\n            'uniform vec2 projectionVector;',\n    \n            'varying vec2 vTextureCoord;',\n            'varying float vAlpha;',\n    \n            'void main(void){',\n            '   vec2 v = aVertexPosition;',\n    \n            '   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);',\n            '   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);',\n            '   v = v + aPositionCoord;',\n    \n            '   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy / projectionVector, 0.0, 1.0);',\n    \n            '   vTextureCoord = aTextureCoord;',\n            '   vAlpha = aAlpha;',\n            '}'\n        ].join('\\n');\n    \n        var fragmentSrc = [\n            'precision lowp float;',\n    \n            'varying vec2 vTextureCoord;',\n            'varying float vAlpha;',\n    \n            'uniform sampler2D uSampler;',\n            'uniform float uAlpha;',\n    \n            'void main(void){',\n            '  vec4 color = texture2D(uSampler, vTextureCoord) * vAlpha * uAlpha;',\n            '  if (color.a == 0.0) discard;',\n            '  gl_FragColor = color;',\n            '}'\n        ].join('\\n');\n    \n    \n        Shader.call(this, gl, vertexSrc, fragmentSrc, uniforms, attributes);\n    \n    }\n    \n    ParticleShader.prototype = Object.create(Shader.prototype);\n    ParticleShader.prototype.constructor = ParticleShader;\n    \n    function GraphicsShader(gl) {\n        Shader.call(this,\n            gl,\n            // vertex shader\n            [\n                'attribute vec2 aVertexPosition;',\n                'attribute vec4 aColor;',\n    \n                'uniform mat3 projectionMatrix;',\n                'uniform vec2 projectionVector;',\n    \n                'uniform float alpha;',\n                'uniform vec3 tint;',\n    \n                'varying vec4 vColor;',\n    \n                'void main(void){',\n                '   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy / projectionVector, 0.0, 1.0);',\n                '   vColor = aColor * vec4(tint * alpha, alpha);',\n                '}'\n            ].join('\\n'),\n            // fragment shader\n            [\n                'precision mediump float;',\n    \n                'varying vec4 vColor;',\n    \n                'void main(void){',\n                '   gl_FragColor = vColor;',\n                '}'\n            ].join('\\n'),\n            // custom uniforms\n            {\n                tint: { type: '3f', value: [0, 0, 0] },\n                alpha: { type: '1f', value: 0 },\n                projectionMatrix: { type: 'mat3', value: new Float32Array(9) },\n                projectionVector: {\n                    type: '2fv',\n                    value: new Float32Array([1, 1])\n                }\n            },\n            // custom attributes\n            {\n                aVertexPosition: 0,\n                aColor: 0\n            }\n        );\n    }\n    \n    GraphicsShader.prototype = Object.create(Shader.prototype);\n    GraphicsShader.prototype.constructor = GraphicsShader;\n    \n\n    return JC;\n\n}));","/**\n * 简单拷贝json对象\n *\n * @name copyJSON\n * @memberof JC\n * @property {JC.copyJSON}\n */\n\n// JC.copyJSON = ;\n\n/**\n * 将角度转化成弧度\n *\n * @name DTR\n * @memberof JC\n * @property {JC.DTR}\n */\n\n// JC.DTR = Math.PI/180;\n\n\n/**\n * 是否为数组\n *\n * @name isArray\n * @memberof JC\n * @property {JC.isArray}\n */\n// JC.isArray = ;\n\n/**\n * 是否为对象\n *\n * @name isObject\n * @memberof JC\n * @property {JC.isObject}\n */\n// JC.isObject = (function(){\n//     var ks = _rt({});\n//     return function(object){\n//         return Object.prototype.toString.call(object) === ks;\n//     };\n// })();\n\n/**\n * 是否为数字\n *\n * @name isNumber\n * @memberof JC\n * @property {JC.isNumber}\n */\n// JC.isNumber = (function(){\n//     var ks = _rt(1);\n//     return function(object){\n//         return Object.prototype.toString.call(object) === ks;\n//     };\n// })();\n\n/**\n * 是否为函数\n *\n * @name isFunction\n * @memberof JC\n * @property {JC.isFunction}\n */\n// JC.isFunction = (function(){\n//     var ks = _rt(function(){});\n//     return function(object){\n//         return Object.prototype.toString.call(object) === ks;\n//     };\n// })();\n\n/**\n * 强化的随机数\n *\n * @name random\n * @memberof JC\n * @property {JC.random}\n */\n\n// JC.random = function(min, max){\n//     if (JC.isArray(min))\n//         return min[~~(Math.random() * min.length)];\n//     if (!JC.isNumber(max))\n//         max = min || 1, min = 0;\n//     return min + Math.random() * (max - min);\n// };\n\n\n/**\n * 阿基米德求模\n *\n * @name euclideanModulo\n * @memberof JC\n * @property {JC.euclideanModulo}\n */\n\n// JC.euclideanModulo = function(n, m){\n//     return ((n % m) + m) % m;\n// };\n\nfunction _rt(val) {\n    return Object.prototype.toString.call(val);\n}\n\nJC.UTILS = {\n\n    hex2rgb: function(hex, out) {\n        out = out || [];\n\n        out[0] = (hex >> 16 & 0xFF) / 255;\n        out[1] = (hex >> 8 & 0xFF) / 255;\n        out[2] = (hex & 0xFF) / 255;\n\n        return out;\n    },\n\n    hex2string: function(hex) {\n        hex = hex.toString(16);\n        hex = '000000'.substr(0, 6 - hex.length) + hex;\n\n        return '#' + hex;\n    },\n\n    rgb2hex: function(rgb) {\n        return ((rgb[0] * 255 << 16) + (rgb[1] * 255 << 8) + rgb[2] * 255);\n    },\n\n    getNextPowerOfTwo: function(number) {\n        // see: http://en.wikipedia.org/wiki/Power_of_two#Fast_algorithm_to_check_if_a_positive_number_is_a_power_of_two\n        if (number > 0 && (number & (number - 1)) === 0) {\n            return number;\n        } else {\n            var result = 1;\n\n            while (result < number) {\n                result <<= 1;\n            }\n\n            return result;\n        }\n    },\n\n    isPowerOfTwo: function(width, height) {\n        return (width > 0 && (width & (width - 1)) === 0 && height > 0 && (height & (height - 1)) === 0);\n    },\n\n    sayHi: function(type) {\n        if (this._saidHi) {\n            return;\n        }\n\n        if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {\n            var args = [\n                '\\n %c %c %c jcw2d.js ' + JC.CONST.VERSION + ' - ✰ ' + type + ' ✰  %c ' + ' %c ' + ' http://www.jason82.com/  %c %c ♥%c♥%c♥ \\n\\n',\n                'background: #ff66a5; padding:5px 0;',\n                'background: #ff66a5; padding:5px 0;',\n                'color: #ff66a5; background: #030307; padding:5px 0;',\n                'background: #ff66a5; padding:5px 0;',\n                'background: #ffc3dc; padding:5px 0;',\n                'background: #ff66a5; padding:5px 0;',\n                'color: #ff2424; background: #fff; padding:5px 0;',\n                'color: #ff2424; background: #fff; padding:5px 0;',\n                'color: #ff2424; background: #fff; padding:5px 0;'\n            ];\n\n            window.console.log.apply(console, args); //jshint ignore:line\n        } else if (window.console) {\n            window.console.log('jcw2d.js ' + JC.CONST.VERSION + ' - ' + type + ' - http://www.jason82.com/'); //jshint ignore:line\n        }\n\n        this._saidHi = true;\n    },\n\n    isWebGLSupported: function() {\n        var contextOptions = { stencil: true };\n        try {\n            if (!window.WebGLRenderingContext) {\n                return false;\n            }\n\n            var canvas = document.createElement('canvas'),\n                gl = canvas.getContext('webgl', contextOptions) || canvas.getContext('experimental-webgl', contextOptions);\n\n            return !!(gl && gl.getContextAttributes().stencil);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    sign: function(n) {\n        return n ? (n < 0 ? -1 : 1) : 0;\n    },\n\n    removeItems: function(arr, startIdx, removeCount) {\n        var length = arr.length;\n\n        if (startIdx >= length || removeCount === 0) {\n            return;\n        }\n\n        removeCount = (startIdx + removeCount > length ? length - startIdx : removeCount);\n        for (var i = startIdx, len = length - removeCount; i < len; ++i) {\n            arr[i] = arr[i + removeCount];\n        }\n\n        arr.length = len;\n    },\n\n    copyJSON: function(json) {\n        return JSON.parse(JSON.stringify(json));\n    },\n\n    isArray: (function() {\n        var ks = _rt('s');\n        return function(object) {\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    isObject: (function() {\n        var ks = _rt({});\n        return function(object) {\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    isNumber: (function() {\n        var ks = _rt(1);\n        return function(object) {\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 是否为函数\n     *\n     * @name isFunction\n     * @memberof JC\n     * @property {JC.isFunction}\n     */\n    isFunction: (function() {\n        var ks = _rt(function() {});\n        return function(object) {\n            return Object.prototype.toString.call(object) === ks;\n        };\n    })(),\n\n    /**\n     * 强化的随机数\n     *\n     * @name random\n     * @memberof JC\n     * @property {JC.random}\n     */\n    random: function(min, max) {\n        if (this.isArray(min))\n            return min[~~(Math.random() * min.length)];\n        if (!this.isNumber(max))\n            max = min || 1, min = 0;\n        return min + Math.random() * (max - min);\n    },\n\n    /**\n     * 阿基米德求模\n     *\n     * @name euclideanModulo\n     * @memberof JC\n     * @property {JC.euclideanModulo}\n     */\n    euclideanModulo: function(n, m) {\n        return ((n % m) + m) % m;\n    },\n\n    clamp: function(x, a, b) {\n        return (x < a) ? a : ((x > b) ? b : x);\n    },\n\n    TextureCache: {},\n\n    BaseTextureCache: {}\n\n};\n","/**\n * jcw2d的事件消息对象的类\n *\n * @class JC.InteractionData\n * @constructor\n */\nfunction InteractionData() {\n    /**\n     * 转换到canvas坐标系统的事件触发点\n     *\n     * @property global\n     * @type Object\n     */\n    this.global = { x: -100000, y: -100000 };\n\n    /**\n     * 事件源\n     *\n     * @property target\n     * @type JC.Container\n     */\n    this.target = null;\n\n    /**\n     * 浏览器的原始事件对象\n     *\n     * @property originalEvent\n     * @type Event\n     */\n    this.originalEvent = null;\n\n    /**\n     * 在canvas内阻止事件冒泡\n     *\n     * @property cancleBubble\n     * @type Boolean\n     */\n    this.cancleBubble = false;\n\n    /**\n     * canvas视窗和页面坐标的兑换比例\n     *\n     * @property ratio\n     * @type Number\n     */\n    this.ratio = 1;\n\n    /**\n     * 事件类型\n     *\n     * @property type\n     * @type String\n     */\n    this.type = '';\n}\nJC.InteractionData = InteractionData;\n\n\n\n/**\n * jcw2d的事件对象的类\n *\n * @class JC.Eventer\n * @constructor Eventer\n * @memberof JC\n */\nfunction Eventer() {\n    this.touchstarted = false;\n    this.mouseDowned = false;\n    this.listeners = {};\n}\n/**\n * 事件对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n * @private\n */\nEventer.prototype.on = function(type, fn) {\n    this.listeners[type] = this.listeners[type] || [];\n    this.listeners[type].push(fn);\n};\n/**\n * 事件对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n * @private\n */\nEventer.prototype.off = function(type, fn) {\n    var ears = this.listeners;\n    var cbs = ears[ type ];\n    var i = ears[type].length;\n    if (cbs&&i>0) {\n        if(fn){\n            while (i--) {\n                if (cbs[i] === fn) {\n                    cbs.splice(i, 1);\n                }\n            }\n        }else{\n            cbs.length = 0;\n        }\n    }\n};\n/**\n * 事件对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n * @private\n */\nEventer.prototype.once = function(type, fn) {\n    var This = this,\n        cb = function(ev) {\n            fn && fn(ev);\n            This.off(type, cb);\n        };\n    this.on(type, cb);\n};\n/**\n * 事件对象的触发事件函数\n *\n * @param ev {JC.InteractionData} 事件类型\n * @private\n */\nEventer.prototype.emit = function(ev) {\n    if (this.listeners === undefined) return;\n    var ears = this.listeners;\n    var cbs = ears[ev.type];\n    if (cbs !== undefined) {\n        var length = cbs.length;\n        var i;\n        for (i = 0; i < length; i++) {\n            cbs[i].call(this, ev);\n        }\n    }\n};\nJC.Eventer = Eventer;\n","/**\n * 动画对象的基本类型\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\n\nfunction Animate(opts) {\n    this.element = opts.element || {};\n    this.duration = opts.duration || 300;\n    this.living = true;\n\n    this.onCompelete = opts.onCompelete || null;\n    this.onUpdate = opts.onUpdate || null;\n\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.ease = opts.ease || 'easeBoth';\n    this.repeats = opts.repeats || 0;\n    this.delay = opts.delay || 0;\n    this.progress = 0 - this.delay;\n\n    this.timeScale = opts.timeScale || 1;\n\n    this.paused = false;\n}\nJC.Animate = Animate;\nAnimate.prototype.nextPose = function() {\n    var cache = {};\n    for (var i in this.ATRE) {\n        cache[i] = JC.TWEEN[this.ease](this.progress, this.ATRS[i], this.ATRE[i] - this.ATRS[i], this.duration);\n        if (this.element[i] !== undefined) this.element[i] = cache[i];\n    }\n    return cache; //this.onUpdate\n};\nAnimate.prototype.pause = function() {\n    this.paused = true;\n};\nAnimate.prototype.start = function() {\n    this.paused = false;\n};\nAnimate.prototype.stop = function() {\n    this.progress = this.duration;\n};\nAnimate.prototype.cancle = function() {\n    this.living = false;\n};\n\n\n/**\n * Transition类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n */\n\nfunction Transition(opts) {\n    JC.Animate.call(this, opts);\n\n    this.ATRS = opts.from;\n    this.ATRE = opts.to;\n}\nJC.Transition = Transition;\nTransition.prototype = Object.create(JC.Animate.prototype);\nTransition.prototype.constructor = JC.Transition;\nTransition.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.progress += this.timeScale * snippet;\n\n    if (this.progress < this.duration) {\n        if (this.progress < 0) return;\n        var pose = this.nextPose();\n        this.onUpdate && this.onUpdate(pose, this.progress / this.duration);\n    } else {\n        this.element.setVal(this.ATRE);\n        this.onUpdate && this.onUpdate(this.ATRE, 1);\n        if (this.repeats > 0 || this.infinity) {\n            this.repeats > 0 && --this.repeats;\n            this.progress = 0;\n            if (this.alternate) {\n                var sc = JC.UTILS.copyJSON(this.ATRS);\n                this.ATRS = JC.UTILS.copyJSON(this.ATRE);\n                this.ATRE = sc;\n            } else {\n                this.element.setVal(this.ATRS);\n            }\n        } else {\n            this.living = false;\n            this.onCompelete && this.onCompelete();\n        }\n    }\n};\n\n\n/**\n * Animation类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画配置信息\n */\nfunction Animation(opts) {\n    JC.Animate.call(this, opts);\n\n    this._keyframes = opts.keys;\n    this._keyIndex = 0;\n    this._direction = 1;\n    this._keyConfig = opts.keyConfig;\n\n    this.configKey();\n}\nJC.Animation = Animation;\nAnimation.prototype = Object.create(JC.Animate.prototype);\nAnimation.prototype.constructor = JC.Animation;\nAnimation.prototype.configKey = function() {\n    this.ATRS = this._keyframes[this._keyIndex];\n    this._keyIndex += this._direction;\n    this.ATRE = this._keyframes[this._keyIndex];\n    var config = this._keyConfig[Math.min(this._keyIndex, this._keyIndex - this._direction)] || {};\n    this.ease = config.ease || this.ease;\n    this.duration = config.duration || this.duration;\n    this.progress = 0;\n};\nAnimation.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.progress += this.timeScale * snippet;\n\n    if (this.progress < this.duration) {\n        if (this.progress < 0) return;\n        var pose = this.nextPose();\n        this.onUpdate && this.onUpdate(pose, this.progress / this.duration, this._keyIndex);\n    } else {\n        this.element.setVal(this.ATRE);\n        this.onUpdate && this.onUpdate(this.ATRE, 1, this._keyIndex);\n        if (this._keyIndex < this._keyframes.length - 1 && this._keyIndex > 0) {\n            this.configKey();\n        } else {\n            if (this.repeats > 0 || this.infinity) {\n                this.repeats > 0 && --this.repeats;\n                if (this.alternate) {\n                    this._direction *= -1;\n                } else {\n                    this._keyIndex = 0;\n                }\n                this.configKey();\n            } else {\n                this.living = false;\n                this.onCompelete && this.onCompelete();\n            }\n        }\n    }\n};\n\n\n/**\n * MovieClip类型动画对象\n *\n * @class\n * @memberof JC\n * @param [element] {object} 动画对象 内部传入\n * @param [opts] {object} 动画配置信息 内部传入\n */\nfunction MovieClip(element, opts) {\n    this.element = element;\n    this.living = false;\n\n    this.onCompelete = null;\n    // this.onUpdate = null;\n\n    this.infinity = false;\n    this.alternate = false;\n    this.repeats = 0;\n\n    this.animations = opts.animations || {};\n\n    this.index = 0;\n    this.direction = 1;\n    this.frames = [];\n    this.sy = opts.sy || 0;\n    this.sx = opts.sx || 0;\n    this.fillMode = 0;\n    this.fps = 16;\n\n    this.paused = false;\n\n    this.pt = 0;\n    this.nt = 0;\n}\nJC.MovieClip = MovieClip;\nMovieClip.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.nt += snippet;\n    if (this.nt - this.pt < this.interval) return;\n    this.pt = this.nt;\n    var i = this.index + this.direction;\n    if (i < this.frames.length && i >= 0) {\n        this.index = i;\n        // Do you need this handler???\n        // this.onUpdate&&this.onUpdate(this.index);\n    } else {\n        if (this.repeats > 0 || this.infinity) {\n            this.repeats > 0 && --this.repeats;\n            if (this.alternate) {\n                this.direction *= -1;\n                this.index += this.direction;\n            } else {\n                this.direction = 1;\n                this.index = 0;\n            }\n            // Do you need this handler???\n            // this.onUpdate&&this.onUpdate(this.index);\n        } else {\n            this.living = false;\n            this.index = this.fillMode;\n            this.onCompelete && this.onCompelete();\n            this.next && this.next();\n        }\n    }\n};\nMovieClip.prototype.getFramePos = function() {\n    var pos = {\n        x: this.sx,\n        y: this.sy\n    };\n    var cf = this.frames[this.index];\n    if (cf > 0) {\n        var row = this.element._textureW / this.element.width >> 0;\n        var lintRow = this.sx / this.element.width >> 0;\n        var lintCol = this.sy / this.element.height >> 0;\n        var mCol = lintCol + (lintRow + cf) / row >> 0;\n        var mRow = (lintRow + cf) % row;\n        pos.x = mRow * this.element.width;\n        pos.y = mCol * this.element.height;\n    }\n    return pos;\n};\nMovieClip.prototype.playMovie = function(opts) {\n    this.next = null;\n    var movie = this.format(opts.movie);\n    if (!JC.isArray(movie)) return;\n    this.frames = movie;\n    this.index = 0;\n    this.direction = 1;\n    this.fillMode = opts.fillMode || 0;\n    this.fps = opts.fps || this.fps;\n    this.infinity = opts.infinity || false;\n    this.alternate = opts.alternate || false;\n    this.repeats = opts.repeats || 0;\n    this.living = true;\n    this.onCompelete = opts.onCompelete || null;\n};\nMovieClip.prototype.format = function(movie) {\n    if (JC.isString(movie)) {\n        var config = this.animations[movie];\n        if (config) {\n            return this.format(config);\n        } else {\n            console.warn(\n                '%c JC.MovieClip warn %c: you didn\\`t config %c' + movie + '%c in animations ',\n                'color: #f98165; background: #80a89e',\n                'color: #80a89e; background: #cad9d5;',\n                'color: #f98165; background: #cad9d5',\n                'color: #80a89e; background: #cad9d5'\n            );\n            return false;\n        }\n    } else if (JC.isArray(movie)) {\n        return movie;\n    } else if (JC.isObject(movie)) {\n        var arr = [];\n        for (var i = movie.start; i <= movie.end; i++) {\n            arr.push(i);\n        }\n        if (movie.next && this.animations[movie.next]) {\n            var This = this;\n            this.next = function() {\n                This.playMovie({\n                    movie: this.animations[movie.next],\n                    infinity: true\n                });\n            };\n        }\n        return arr;\n    }\n};\nMovieClip.prototype.pause = function() {\n    this.paused = true;\n};\nMovieClip.prototype.start = function() {\n    this.paused = false;\n};\nMovieClip.prototype.cancle = function() {\n    this.living = false;\n};\nObject.defineProperty(MovieClip.prototype, 'interval', {\n    get: function() {\n        return this.fps > 0 ? 1000 / this.fps >> 0 : 16;\n    }\n});\n\n\n/**\n * Transition类型动画对象\n *\n * @class\n * @memberof JC\n * @param [opts] {object} 动画所具备的特性\n * @param [opts] {object} 动画配置信息\n */\n\nfunction PathMotion(opts) {\n    JC.Animate.call(this, opts);\n\n    this.points = opts.points;\n    this.attachNormal = opts.attachNormal || false;\n    this.sDeg = false;\n    this.tDeg = 0;\n    this.pDeg = 0;\n}\nJC.PathMotion = PathMotion;\nPathMotion.prototype = Object.create(JC.Animate.prototype);\nPathMotion.prototype.constructor = JC.PathMotion;\nPathMotion.prototype.update = function(snippet) {\n    if (this.paused || !this.living) return;\n    this.progress += this.timeScale * snippet;\n\n    if (this.progress < this.duration) {\n        if (this.progress < 0) return;\n        var pose = this.nextPose();\n        this.onUpdate && this.onUpdate(pose, this.progress / this.duration);\n    } else {\n        this.element.setVal(this.ATRE);\n        this.onUpdate && this.onUpdate(this.ATRE, 1);\n        if (this.repeats > 0 || this.infinity) {\n            this.repeats > 0 && --this.repeats;\n            this.progress = 0;\n            if (this.alternate) {\n                var sc = JC.UTILS.copyJSON(this.ATRS);\n                this.ATRS = JC.UTILS.copyJSON(this.ATRE);\n                this.ATRE = sc;\n            } else {\n                this.element.setVal(this.ATRS);\n            }\n        } else {\n            this.living = false;\n            this.onCompelete && this.onCompelete();\n        }\n    }\n};\nPathMotion.prototype.nextPose = function() {\n    var cache = {};\n    // for(var i in this.ATRE){\n    //     cache[i] = JC.TWEEN[this.ease]( this.progress , this.ATRS[i] , this.ATRE[i] - this.ATRS[i] , this.duration );\n    //     if(this.element[i]!==undefined)this.element[i] = cache[i];\n    // }\n    var t = JC.TWEEN[this.ease](this.progress, 0, 1, this.duration);\n    var pos = this.getPoint(t, this.points);\n    cache.x = pos.x;\n    cache.y = pos.y;\n    // cache.y = pos.y;\n    if (this.attachNormal) {\n        cache.rotate = this.decomposeRotate(t);\n    }\n    return cache; //this.onUpdate\n};\nPathMotion.prototype.getPoint = function(t, points) {\n    var a = points,\n        len = a.length,\n        rT = 1 - t,\n        l = a.slice(0, len - 1),\n        r = a.slice(1),\n        oP = {};\n    if (len > 3) {\n        var oL = this.getPoint(t, l),\n            oR = this.getPoint(t, r);\n        oP.x = rT * oL.x + t * oR.x;\n        oP.y = rT * oL.y + t * oR.y;\n        // oP.z = rT * oL.z + t * oR.z;\n        return oP;\n    } else {\n        oP.x = rT * rT * points[0].x + 2 * t * rT * points[1].x + t * t * points[2].x;\n        oP.y = rT * rT * points[0].y + 2 * t * rT * points[1].y + t * t * points[2].y;\n        // oP.z = rT * rT * points[0].z + 2 * t * rT * points[1].z + t * t * points[2].z;\n        return oP;\n    }\n};\nPathMotion.prototype.decomposeRotate = function(t) {\n    var p1 = this.getPoint(t, this.points);\n    var p2 = this.getPoint(t + 0.01, this.points);\n    var deg = p1.xxxxx + p2.x;\n};\n\n/**\n * Animator类型动画对象\n *\n * @class\n * @memberof JC\n */\nfunction Animator() {\n    this.start = false;\n    this.animates = [];\n}\nJC.Animator = Animator;\nAnimator.prototype.update = function(snippet) {\n    for (var i = 0; i < this.animates.length; i++) {\n        if (!this.animates[i].living) this.animates.splice(i, 1);\n        this.animates[i] && this.animates[i].update(snippet);\n    }\n};\nAnimator.prototype.fromTo = function(opts) {\n    var animate = new JC.Transition(opts);\n    this.animates.push(animate);\n    return animate;\n};\nAnimator.prototype.keyFrames = function(opts) {\n    var animate = new JC.Animation(opts);\n    this.animates.push(animate);\n    return animate;\n};\n","/**\n * The Point object represents a location in a two-dimensional coordinate system, where x represents\n * the horizontal axis and y represents the vertical axis.\n *\n * @class\n * @memberof PIXI\n * @param [x=0] {number} position of the point on the x axis\n * @param [y=0] {number} position of the point on the y axis\n */\nfunction Point(x, y) {\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n}\n\nJC.Point = Point;\nPoint.prototype.constructor = JC.Point;\n\n/**\n * Creates a clone of this point\n *\n * @return {PIXI.Point} a copy of the point\n */\nPoint.prototype.clone = function() {\n    return new Point(this.x, this.y);\n};\n\n/**\n * Copies x and y from the given point\n *\n * @param p {PIXI.Point}\n */\nPoint.prototype.copy = function(p) {\n    this.set(p.x, p.y);\n};\n\n/**\n * Returns true if the given point is equal to this point\n *\n * @param p {PIXI.Point}\n * @returns {boolean}\n */\nPoint.prototype.equals = function(p) {\n    return (p.x === this.x) && (p.y === this.y);\n};\n\n/**\n * Sets the point to a new x and y position.\n * If y is omitted, both x and y will be set to x.\n *\n * @param [x=0] {number} position of the point on the x axis\n * @param [y=0] {number} position of the point on the y axis\n */\nPoint.prototype.set = function(x, y) {\n    this.x = x || 0;\n    this.y = y || ((y !== 0) ? this.x : 0);\n};\n","function Rectangle(x, y, width, height)\n{\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.x = x || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.y = y || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.width = width || 0;\n\n    /**\n     * @member {number}\n     * @default 0\n     */\n    this.height = height || 0;\n\n}\nJC.Rectangle = Rectangle;\nRectangle.prototype.constructor = JC.Rectangle;\n\n/**\n * A constant empty rectangle.\n *\n * @static\n * @constant\n */\nRectangle.EMPTY = new Rectangle(0, 0, 0, 0);\n\n\n/**\n * Creates a clone of this Rectangle\n *\n * @return {PIXI.Rectangle} a copy of the rectangle\n */\nRectangle.prototype.clone = function ()\n{\n    return new Rectangle(this.x, this.y, this.width, this.height);\n};\n\n/**\n * Checks whether the x and y coordinates given are contained within this Rectangle\n *\n * @param x {number} The X coordinate of the point to test\n * @param y {number} The Y coordinate of the point to test\n * @return {boolean} Whether the x/y coordinates are within this Rectangle\n */\nRectangle.prototype.contains = function (x, y)\n{\n    if (this.width <= 0 || this.height <= 0)\n    {\n        return false;\n    }\n\n    if (x >= this.x && x < this.x + this.width)\n    {\n        if (y >= this.y && y < this.y + this.height)\n        {\n            return true;\n        }\n    }\n\n    return false;\n};\n","/**\n * 矩阵对象，用来描述和记录对象的tansform 状态信息\n *\n * @class\n * @memberof JC\n */\nfunction Matrix() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n}\nJC.Matrix = Matrix;\nMatrix.prototype.constructor = JC.Matrix;\n\n/**\n * 从数组设置一个矩阵\n *\n * @param array {number[]}\n */\nMatrix.prototype.fromArray = function(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n};\n\n/**\n * 将对象的数据以数组的形式导出\n *\n * @param transpose {boolean} 是否对矩阵进行转置\n * @return {number[]} 返回数组\n */\nMatrix.prototype.toArray = function(transpose) {\n    if (!this.array) this.array = new Float32Array(9);\n    var array = this.array;\n\n    if (transpose) {\n        array[0] = this.a;\n        array[1] = this.b;\n        array[2] = 0;\n        array[3] = this.c;\n        array[4] = this.d;\n        array[5] = 0;\n        array[6] = this.tx;\n        array[7] = this.ty;\n        array[8] = 1;\n    } else {\n        array[0] = this.a;\n        array[1] = this.c;\n        array[2] = this.tx;\n        array[3] = this.b;\n        array[4] = this.d;\n        array[5] = this.ty;\n        array[6] = 0;\n        array[7] = 0;\n        array[8] = 1;\n    }\n    return array;\n};\n\n/**\n * 将坐标点与矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 返回数组\n */\nMatrix.prototype.apply = function(pos, newPos) {\n    newPos = newPos || {};\n    newPos.x = this.a * pos.x + this.c * pos.y + this.tx;\n    newPos.y = this.b * pos.x + this.d * pos.y + this.ty;\n    return newPos;\n};\n/**\n * 将坐标点与转置矩阵左乘\n *\n * @param pos {object} 原始点\n * @param newPos {object} 变换之后的点\n * @return {object} 变换之后的点\n */\nMatrix.prototype.applyInverse = function(pos, newPos) {\n    var id = 1 / (this.a * this.d + this.c * -this.b);\n    newPos.x = this.d * id * pos.x + -this.c * id * pos.y + (this.ty * this.c - this.tx * this.d) * id;\n    newPos.y = this.a * id * pos.y + -this.b * id * pos.x + (-this.ty * this.a + this.tx * this.b) * id;\n    return newPos;\n};\n/**\n * 位移操作\n *\n * @return {this} \n */\nMatrix.prototype.translate = function(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n};\n/**\n * 缩放操作\n *\n * @return {this} \n */\nMatrix.prototype.scale = function(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n};\n/**\n * 旋转操作\n *\n * @return {this} \n */\nMatrix.prototype.rotate = function(angle) {\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    var a1 = this.a;\n    var c1 = this.c;\n    var tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n};\n/**\n * 矩阵相乘\n *\n * @return {this} \n */\nMatrix.prototype.append = function(matrix) {\n    var a1 = this.a;\n    var b1 = this.b;\n    var c1 = this.c;\n    var d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n};\n/**\n * 单位矩阵\n *\n * @return {this} \n */\nMatrix.prototype.identity = function() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n};\n/**\n * 快速设置矩阵各个分量\n *\n * @return {this} \n */\nMatrix.prototype.setTransform = function(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    var a, b, c, d, sr, cr, cy, sy, nsx, cx;\n\n    sr = Math.sin(rotation);\n    cr = Math.cos(rotation);\n    cy = Math.cos(skewY);\n    sy = Math.sin(skewY);\n    nsx = -Math.sin(skewX);\n    cx = Math.cos(skewX);\n\n    a = cr * scaleX;\n    b = sr * scaleX;\n    c = -sr * scaleY;\n    d = cr * scaleY;\n\n    this.a = cy * a + sy * c;\n    this.b = cy * b + sy * d;\n    this.c = nsx * a + cx * c;\n    this.d = nsx * b + cx * d;\n\n    this.tx = x + (pivotX * a + pivotY * c);\n    this.ty = y + (pivotX * b + pivotY * d);\n\n    return this;\n};\nJC.IDENTITY = new Matrix();\nJC.TEMP_MATRIX = new Matrix();\n","function BaseTexture(source, scaleMode) {\n    JC.Eventer.call(this);\n\n    this.width = 100;\n\n    this.height = 100;\n\n    this.realWidth = 100;\n\n    this.realHeight = 100;\n\n    this.scaleMode = scaleMode || JC.CONST.SCALE_MODES.DEFAULT;\n\n    this.hasLoaded = false;\n\n    this.isLoading = false;\n\n    this.source = null; // set in loadSource, if at all\n\n    this.resolution = 1;\n\n    this.premultipliedAlpha = true;\n\n    this.imageUrl = null;\n\n    this.isPowerOfTwo = false;\n\n    this.mipmap = false;\n\n    // this._glTextures = {};\n\n    // if no source passed don't try to load\n    if (source) {\n        this.loadSource(source);\n    }\n\n}\n\nBaseTexture.prototype = Object.create(JC.Eventer.prototype);\nBaseTexture.prototype.constructor = BaseTexture;\n\nBaseTexture.prototype.update = function() {\n    this.realWidth = this.source.naturalWidth || this.source.width;\n    this.realHeight = this.source.naturalHeight || this.source.height;\n\n    this.width = this.realWidth / this.resolution;\n    this.height = this.realHeight / this.resolution;\n\n    this.isPowerOfTwo = JC.UTILS.isPowerOfTwo(this.realWidth, this.realHeight);\n\n    this.emit({ type: 'update' });\n};\n\nBaseTexture.prototype.loadSource = function(source) {\n    var wasLoading = this.isLoading;\n    this.hasLoaded = false;\n    this.isLoading = false;\n\n    this.source = source;\n\n    if ((this.source.complete || this.source.getContext) && this.source.width && this.source.height) {\n        this._sourceLoaded();\n    } else if (!source.getContext) {\n        this.isLoading = true;\n\n        var This = this;\n\n        source.onload = function() {\n            source.onload = null;\n            source.onerror = null;\n\n            This.isLoading = false;\n            This._sourceLoaded();\n            This.emit({ type: 'loaded' });\n        };\n\n        source.onerror = function() {\n            source.onload = null;\n            source.onerror = null;\n\n            This.isLoading = false;\n            This.emit({ type: 'error' });\n        };\n\n        if (source.complete && source.src) {\n            this.isLoading = false;\n\n            source.onload = null;\n            source.onerror = null;\n\n            if (source.width && source.height) {\n                this._sourceLoaded();\n\n                // If any previous subscribers possible\n                if (wasLoading) {\n                    this.emit({ type: 'loaded' });\n                }\n            } else {\n                // If any previous subscribers possible\n                if (wasLoading) {\n                    this.emit({ type: 'error' });\n                }\n            }\n        }\n    }\n};\n\nBaseTexture.prototype._sourceLoaded = function() {\n    this.hasLoaded = true;\n    this.update();\n};\nBaseTexture.fromImage = function(imageUrl, crossorigin, scaleMode) {\n    var baseTexture = JC.UTILS.BaseTextureCache[imageUrl];\n\n    if (crossorigin === undefined && imageUrl.indexOf('data:') !== 0) {\n        crossorigin = true;\n    }\n\n    if (!baseTexture) {\n        var image = new Image();\n        if (crossorigin) {\n            image.crossOrigin = '';\n        }\n\n        baseTexture = new BaseTexture(image, scaleMode);\n        baseTexture.imageUrl = imageUrl;\n\n        image.src = imageUrl;\n\n        JC.UTILS.BaseTextureCache[imageUrl] = baseTexture;\n\n    }\n\n    return baseTexture;\n};\n","function Texture(baseTexture, frame) {\n    JC.Eventer.call(this);\n\n    this.noFrame = false;\n\n    if (!frame) {\n        this.noFrame = true;\n        frame = new JC.Rectangle(0, 0, 1, 1);\n    }\n\n    if (baseTexture instanceof Texture) {\n        baseTexture = baseTexture.baseTexture;\n    }\n\n    this.baseTexture = baseTexture;\n\n    this._frame = frame;\n\n    this.valid = false;\n\n    this.requiresUpdate = false;\n\n    this._uvs = null;\n\n    this.width = 0;\n\n    this.height = 0;\n\n    if (baseTexture.hasLoaded) {\n        if (this.noFrame) {\n            frame = new JC.Rectangle(0, 0, baseTexture.width, baseTexture.height);\n\n            // if there is no frame we should monitor for any base texture changes..\n            baseTexture.on('update', this.onBaseTextureUpdated.bind(this));\n        }\n        this.frame = frame;\n    } else {\n        baseTexture.once('loaded', this.onBaseTextureLoaded.bind(this));\n    }\n\n}\nJC.Texture = Texture;\nTexture.prototype = Object.create(JC.Eventer.prototype);\nTexture.prototype.constructor = Texture;\n\nObject.defineProperties(Texture.prototype, {\n    frame: {\n        get: function() {\n            return this._frame;\n        },\n        set: function(frame) {\n            this._frame = frame;\n\n            this.noFrame = false;\n\n            this.width = frame.width;\n            this.height = frame.height;\n\n            this.valid = frame && frame.width && frame.height && this.baseTexture.hasLoaded;\n            if (this.valid) {\n                this._updateUvs();\n            }\n        }\n    }\n});\n\nTexture.prototype.update = function() {\n    this.baseTexture.update();\n};\n\nTexture.prototype.onBaseTextureLoaded = function() {\n    // TODO this code looks confusing.. boo to abusing getters and setterss!\n    if (this.noFrame) {\n        this.frame = new JC.Rectangle(0, 0, this.baseTexture.width, this.baseTexture.height);\n    } else {\n        this.frame = this._frame;\n    }\n\n    this.emit({type: 'loaded'});\n};\n\nTexture.prototype.onBaseTextureUpdated = function() {\n    this._frame.width = this.baseTexture.width;\n    this._frame.height = this.baseTexture.height;\n\n    this.emit({type: 'update'});\n};\n\nTexture.prototype._updateUvs = function() {\n    if (!this._uvs) {\n        this._uvs = new TextureUvs();\n    }\n    this._uvs.set(this.frame, this.baseTexture);\n};\n\nTexture.fromImage = function(imageUrl, crossorigin, scaleMode) {\n    var texture = JC.UTILS.TextureCache[imageUrl];\n\n    if (!texture) {\n        texture = new Texture(BaseTexture.fromImage(imageUrl, crossorigin, scaleMode));\n        JC.UTILS.TextureCache[imageUrl] = texture;\n    }\n\n    return texture;\n};\n\nTexture.fromCanvas = function(canvas, scaleMode) {\n    return new Texture(BaseTexture.fromCanvas(canvas, scaleMode));\n};\n","function TextureUvs() {\n    this.x0 = 0;\n    this.y0 = 0;\n\n    this.x1 = 1;\n    this.y1 = 0;\n\n    this.x2 = 1;\n    this.y2 = 1;\n\n    this.x3 = 0;\n    this.y3 = 1;\n}\n\nTextureUvs.prototype.set = function(frame, baseFrame) {\n    var tw = baseFrame.width;\n    var th = baseFrame.height;\n\n    this.x0 = frame.x / tw;\n    this.y0 = frame.y / th;\n\n    this.x1 = (frame.x + frame.width) / tw;\n    this.y1 = frame.y / th;\n\n    this.x2 = (frame.x + frame.width) / tw;\n    this.y2 = (frame.y + frame.height) / th;\n\n    this.x3 = frame.x / tw;\n    this.y3 = (frame.y + frame.height) / th;\n};\nTextureUvs.prototype.get = function() {\n    return new Float32Array([\n        this.x0, this.y0, this.x1, this.y1,\n        this.x2, this.y2, this.x3, this.y3\n    ]);\n};\n","/**\n * 显示对象的基类\n *\n * @class\n * @memberof JC\n */\nfunction DisplayObject() {\n    this._ready = true;\n\n    this.visible = true;\n    this.worldAlpha = 1;\n    this.alpha = 1;\n\n    this.scaleX = 1;\n    this.scaleY = 1;\n\n    this.skewX = 0;\n    this.skewY = 0;\n\n    this.rotation = 0;\n    this.rotationCache = 0;\n    this._sr = 0;\n    this._cr = 1;\n\n    this.x = 0;\n    this.y = 0;\n\n    this.pivotX = 0;\n    this.pivotY = 0;\n\n    this.mask = null;\n\n    this.parent = null;\n    this.worldTransform = new JC.Matrix();\n\n    this.event = new JC.Eventer();\n    this.passEvent = false;\n    this.bounds = [];\n\n    this.Animator = new JC.Animator();\n}\nJC.DisplayObject = DisplayObject;\nDisplayObject.prototype.constructor = JC.DisplayObject;\n\nObject.defineProperty(DisplayObject.prototype, 'scale', {\n    get: function() {\n        return this.scaleX;\n    },\n    set: function(scale) {\n        this.scaleX = this.scaleY = scale;\n    }\n});\n\n/**\n * fromTo动画，指定动画的启始位置和结束位置\n *\n * ```js\n * // 扩展缓动函数，缓动函数库详见目录下的util/tween.js\n * JC.TWEEN.extend({    \n *    bounceOut: function(t, b, c, d){\n *        if ((t/=d) < (1/2.75)) {\n *            return c*(7.5625*t*t) + b;\n *        } else if (t < (2/2.75)) {\n *            return c*(7.5625*(t-=(1.5/2.75))*t + 0.75) + b;\n *        } else if (t < (2.5/2.75)) {\n *            return c*(7.5625*(t-=(2.25/2.75))*t + 0.9375) + b;\n *        }\n *        return c*(7.5625*(t-=(2.625/2.75))*t + 0.984375) + b;\n *    }\n * });\n * var dispayObj = new JC.Text('Hello JC','bold 36px Arial','#c32361');\n * dispayObj.fromTo({\n *   from: {x: 100},\n *   to: {x: 200},\n *   ease: 'bounceOut', // 执行动画使用的缓动函数 默认值为 easeBoth\n *   repeats: 10, // 动画运动完后再重复10次\n *   infinity: true, // 无限循环动画\n *   alternate: true, // 偶数次的时候动画回放\n *   duration: 1000, // 动画时长 ms单位 默认 300ms\n *   onUpdate: function(state,rate){},\n *   onCompelete: function(){ console.log('end'); } // 动画执行结束回调\n * });\n * ```\n *\n * @param opts {object} 配置\n * @param clear {boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.fromTo = function(opts, clear) {\n    opts.element = this;\n    this.setVal(opts.from);\n    if (clear) this.Animator.animates.length = 0;\n    return this.Animator.fromTo(opts);\n};\n\n/**\n * to动画，物体当前位置为动画的启始位置，只需制定动画的结束位置\n *\n * @param opts {object} 配置\n * @param clear {boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.to = function(opts, clear) {\n    opts.element = this;\n    opts.from = {};\n    for (var i in opts.to) {\n        opts.from[i] = this[i];\n    }\n    if (clear) this.Animator.animates.length = 0;\n    return this.Animator.fromTo(opts);\n};\n\n/**\n * keyFrames动画，设置物体动画的keyframe，可以为相邻的两个keyFrames之前配置差值时间及时间函数\n *\n * @param opts {object} 配置\n * @param clear {boolean} 是否去掉之前的动画\n */\nDisplayObject.prototype.keyFrames = function(opts, clear) {\n    opts.element = this;\n    if (clear) this.Animator.animates.length = 0;\n    return this.Animator.keyFrames(opts);\n};\n\n/**\n * 检测是否可见\n *\n * @method isVisible\n * @private\n */\nDisplayObject.prototype.isVisible = function() {\n    return !!(this.visible && this.alpha > 0 && this.scaleX * this.scaleY > 0);\n};\n\nDisplayObject.prototype.setVal = function(vals) {\n    if (vals === undefined) return;\n    for (var key in vals) {\n        if (this[key] === undefined) {\n            continue;\n        } else {\n            this[key] = vals[key];\n        }\n    }\n};\nDisplayObject.prototype.updateMe = function() {\n    var pt = this.parent.worldTransform;\n    var wt = this.worldTransform;\n\n    var a, b, c, d, tx, ty;\n\n    if (this.skewX || this.skewY) {\n\n        JC.TEMP_MATRIX.setTransform(\n            this.x,\n            this.y,\n            this.pivotX,\n            this.pivotY,\n            this.scaleX,\n            this.scaleY,\n            this.rotation,\n            this.skewX,\n            this.skewY\n        );\n\n        wt.a = JC.TEMP_MATRIX.a * pt.a + JC.TEMP_MATRIX.b * pt.c;\n        wt.b = JC.TEMP_MATRIX.a * pt.b + JC.TEMP_MATRIX.b * pt.d;\n        wt.c = JC.TEMP_MATRIX.c * pt.a + JC.TEMP_MATRIX.d * pt.c;\n        wt.d = JC.TEMP_MATRIX.c * pt.b + JC.TEMP_MATRIX.d * pt.d;\n        wt.tx = JC.TEMP_MATRIX.tx * pt.a + JC.TEMP_MATRIX.ty * pt.c + pt.tx;\n        wt.ty = JC.TEMP_MATRIX.tx * pt.b + JC.TEMP_MATRIX.ty * pt.d + pt.ty;\n    } else {\n        if (this.rotation % 360) {\n            if (this.rotation !== this.rotationCache) {\n                this.rotationCache = this.rotation;\n                this._sr = Math.sin(this.rotation * JC.CONST.DTR);\n                this._cr = Math.cos(this.rotation * JC.CONST.DTR);\n            }\n\n            a = this._cr * this.scaleX;\n            b = this._sr * this.scaleX;\n            c = -this._sr * this.scaleY;\n            d = this._cr * this.scaleY;\n            tx = this.x;\n            ty = this.y;\n\n            if (this.pivotX || this.pivotY) {\n                tx -= this.pivotX * a + this.pivotY * c;\n                ty -= this.pivotX * b + this.pivotY * d;\n            }\n            wt.a = a * pt.a + b * pt.c;\n            wt.b = a * pt.b + b * pt.d;\n            wt.c = c * pt.a + d * pt.c;\n            wt.d = c * pt.b + d * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        } else {\n            a = this.scaleX;\n            d = this.scaleY;\n\n            tx = this.x - this.pivotX * a;\n            ty = this.y - this.pivotY * d;\n\n            wt.a = a * pt.a;\n            wt.b = a * pt.b;\n            wt.c = d * pt.c;\n            wt.d = d * pt.d;\n            wt.tx = tx * pt.a + ty * pt.c + pt.tx;\n            wt.ty = tx * pt.b + ty * pt.d + pt.ty;\n        }\n    }\n    this.worldAlpha = this.alpha * this.parent.worldAlpha;\n};\n\nDisplayObject.prototype.upAnimation = function(snippet) {\n    this.Animator.update(snippet);\n};\n// DisplayObject.prototype.setTransform = function(ctx){\n//     var matrix = this.worldTransform;\n//     ctx.globalAlpha = this.worldAlpha;\n//     ctx.setTransform(matrix.a,matrix.b,matrix.c,matrix.d,matrix.tx,matrix.ty);\n// };\n/**\n * 获取物体相对于canvas世界坐标系的坐标位置\n *\n * @return {object}\n */\nDisplayObject.prototype.getGlobalPos = function() {\n    return { x: this.worldTransform.tx, y: this.worldTransform.ty };\n};\n/**\n * 显示对象的事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nDisplayObject.prototype.on = function(type, fn) {\n    this.event.on(type, fn);\n};\n/**\n * 显示对象的事件解绑函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 注册时回调函数的引用\n */\nDisplayObject.prototype.off = function(type, fn) {\n    this.event.off(type, fn);\n};\n/**\n * 显示对象的一次性事件绑定函数\n *\n * @param type {String} 事件类型\n * @param fn {Function} 回调函数\n */\nDisplayObject.prototype.once = function(type, fn) {\n    this.event.once(type, cb);\n};\n/**\n * 获取当前坐标系下的监测区域\n *\n * @method getBounds\n * @private\n */\nDisplayObject.prototype.getBounds = function() {\n    var bounds = [],\n        l = this.bounds.length >> 1;\n\n    for (var i = 0; i < l; i++) {\n        var p = this.worldTransform.apply({ x: this.bounds[i * 2], y: this.bounds[i * 2 + 1] });\n        bounds[i * 2] = p.x;\n        bounds[i * 2 + 1] = p.y;\n    }\n    return bounds;\n};\n/**\n * 设置显示对象的监测区域\n *\n * @param points {Array} 区域的坐标点 [x0,y0 ..... xn,yn]\n * @param needless {boolean} 当该值为true，当且仅当this.bounds为空时才会更新点击区域。默认为false，总是更新点击区域。\n * @return {Array}\n */\nDisplayObject.prototype.setBounds = function(points, needless) {\n};\nDisplayObject.prototype.ContainsPoint = function(p, px, py) {\n    var n = p.length >> 1;\n    var ax, ay = p[2 * n - 3] - py,\n        bx = p[2 * n - 2] - px,\n        by = p[2 * n - 1] - py;\n\n    //var lup = by > ay;\n    for (var i = 0; i < n; i++) {\n        ax = bx;\n        ay = by;\n        bx = p[2 * i] - px;\n        by = p[2 * i + 1] - py;\n        if (ay == by) continue;\n        lup = by > ay;\n    }\n\n    var depth = 0;\n    for (i = 0; i < n; i++) {\n        ax = bx;\n        ay = by;\n        bx = p[2 * i] - px;\n        by = p[2 * i + 1] - py;\n        if (ay < 0 && by < 0) continue;\n        if (ay > 0 && by > 0) continue;\n        if (ax < 0 && bx < 0) continue;\n\n        if (ay == by && Math.min(ax, bx) <= 0) return true;\n        if (ay == by) continue;\n\n        var lx = ax + (bx - ax) * (-ay) / (by - ay);\n        if (lx === 0) return true;\n        if (lx > 0) depth++;\n        if (ay === 0 && lup && by > ay) depth--;\n        if (ay === 0 && !lup && by < ay) depth--;\n        lup = by > ay;\n    }\n    return (depth & 1) == 1;\n};\n","/**\n * 显示对象容器，继承至DisplayObject\n *\n * ```js\n * var container = new JC.Container();\n * container.addChilds(sprite);\n * ```\n *\n * @class\n * @extends JC.DisplayObject\n * @memberof JC\n */\nfunction Container() {\n    JC.DisplayObject.call(this);\n    this.cds = [];\n    this.timeScale = 1;\n    this.paused = false;\n}\nJC.Container = Container;\nContainer.prototype = Object.create(JC.DisplayObject.prototype);\nContainer.prototype.constructor = JC.Container;\n\n/**\n * 向容器添加一个物体\n * \n * ```js\n * container.addChilds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param child {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.addChilds = function(cd) {\n    if (cd === undefined) return cd;\n    var l = arguments.length;\n    if (l > 1) {\n        for (var i = 0; i < l; i++) { this.addChilds(arguments[i]); }\n        return arguments[l - 1];\n    }\n    if (cd.parent) { cd.parent.removeChilds(cd); }\n    cd.parent = this;\n    this.cds.push(cd);\n    return cd;\n};\n/**\n * 从容器移除一个物体\n * \n * ```js\n * container.removeChilds(sprite,sprite2,text3,graphice);\n * ```\n *\n * @param child {JC.Container}\n * @return {JC.Container}\n */\nContainer.prototype.removeChilds = function() {\n    var l = arguments.length;\n    if (l > 1) {\n        for (var i = 0; i < l; i++) { this.removeChilds(arguments[i]); }\n    } else if (l === 1) {\n        for (var a = 0; a < this.cds.length; a++) {\n            if (this.cds[a] === arguments[0]) {\n                this.cds.splice(a, 1);\n                this.cds[a].parent = null;\n                a--;\n            }\n        }\n    }\n};\nContainer.prototype.updateTransform = function(snippet) {\n    if (!this._ready) return;\n    snippet = this.timeScale * snippet;\n    !this.paused && this.upAnimation(snippet);\n    this.updateMe();\n    this.cds.length > 0 && this.updateChilds(snippet);\n};\nContainer.prototype.updateChilds = function(snippet) {\n    for (var i = 0, l = this.cds.length; i < l; i++) {\n        var cd = this.cds[i];\n        cd.updateTransform(snippet);\n    }\n};\nContainer.prototype.render = function(session) {\n    this.renderMe(session);\n    this.cds.length > 0 && this.renderChilds(session);\n};\nContainer.prototype.renderMe = function() {\n    return true;\n};\nContainer.prototype.renderChilds = function(session) {\n    for (var i = 0, l = this.cds.length; i < l; i++) {\n        var cd = this.cds[i];\n        if (!cd.isVisible() || !cd._ready) continue;\n        cd.render(session);\n    }\n};\nContainer.prototype.noticeEvent = function(ev) {\n    var i = this.cds.length - 1;\n    while (i >= 0) {\n        var child = this.cds[i];\n        if (child.visible) {\n            child.noticeEvent(ev);\n            if (ev.target) break;\n        }\n        i--;\n    }\n    this.upEvent(ev);\n};\nContainer.prototype.upEvent = function(ev) {\n    if (!this._ready) return;\n    if (ev.target || (!this.passEvent && this.hitTest(ev))) {\n        if (!ev.cancleBubble || ev.target === this) {\n            if (!(this.event.listeners[ev.type] && this.event.listeners[ev.type].length > 0)) return;\n            this.event.emit(ev);\n        }\n    }\n};\nContainer.prototype.hitTest = function(ev) {\n    if (ev.type === 'touchmove' || ev.type === 'touchend' || ev.type === 'mousemove' || ev.type === 'mouseup') {\n        var re = this.event.touchstarted;\n        if (re) ev.target = this;\n        if (ev.type === 'touchend' || ev.type === 'mouseup') this.event.touchstarted = false;\n        return re;\n    }\n    if (this.hitTestMe(ev)) {\n        ev.target = this;\n        if (ev.type === 'touchstart' || ev.type === 'mousedown') this.event.touchstarted = true;\n        return true;\n    }\n    return false;\n};\nContainer.prototype.hitTestMe = function(ev) {\n    return this.ContainsPoint(this.getBound(), ev.global.x, ev.global.y);\n};\nContainer.prototype.pause = function() {\n    this.paused = true;\n};\nContainer.prototype.start = function() {\n    this.paused = false;\n};\nContainer.prototype.cancle = function() {\n    this.Animator.animates.length = 0;\n};\n","function Sprite(texture) {\n    JC.Container.call(this);\n\n    this._ready = false;\n\n    this.regX = 0;\n\n    this.regY = 0;\n\n    this._texture = null;\n\n    this.tint = 0xFFFFFF;\n\n    this.blendMode = JC.CONST.BLEND_MODES.NORMAL;\n\n    this.shaderType = 'sprite';\n\n    this.cachedTint = 0xFFFFFF;\n\n    this.cachedAlpha = this.alpha;\n\n    this.vertices = null;\n\n    this.indices = new Uint16Array([0,1,2,0,2,3]);\n\n    this.colors = null;\n\n    this.dynamicStride = 0;\n    this.dynamicBuffer = null;\n    this.dynamicData = null;\n\n    this.indexBuffer = null;\n\n    this.texture = texture;\n\n    this.update = false;\n\n}\n\nJC.Sprite = Sprite;\nSprite.prototype = Object.create(JC.Container.prototype);\nSprite.prototype.constructor = JC.Sprite;\n\nObject.defineProperties(Sprite.prototype, {\n    texture: {\n        get: function() {\n            return this._texture;\n        },\n        set: function(value) {\n            if (this._texture === value) {\n                return;\n            }\n\n            this._texture = value;\n            this.cachedTint = 0xFFFFFF;\n\n\n            if (value) {\n                // wait for the texture to load\n                if (value.baseTexture.hasLoaded) {\n                    this.upTexture();\n                    this._ready = true;\n                } else {\n                    var This = this;\n                    value.on('loaded', function() {\n                        This.upTexture();\n                        This._ready = true;\n                    });\n                }\n            }\n        }\n    },\n    aColor: {\n        get: function() {\n            if (this.tint === this.cachedTint && this.cachedAlpha === this.alpha && this.colors) return this.colors;\n            this.cachedTint = this.tint;\n            this.cachedAlpha = this.alpha;\n            this.colors = new Float32Array(JC.UTILS.hex2rgb(this.tint).concat([this.alpha]));\n            return this.colors;\n        }\n    }\n});\n\nSprite.prototype.upTexture = function() {\n    this.width = this.texture.width;\n    this.height = this.texture.height;\n    this.regX = this.width >> 1;\n    this.regY = this.height >> 1;\n\n    this.vertices = new Float32Array([-this.regX, this.regY, this.width - this.regX, this.regY, this.width - this.regX, this.regY - this.height, -this.regX, this.regY - this.height]);\n    this.setBounds(null, true);\n};\n\nSprite.prototype.setBounds = function(points, needless) {\n    var l = this.bounds.length;\n    if (l > 4 && needless) return;\n    points = points || this.vertices;\n    this.bounds = points;\n};\n\nSprite.prototype.renderMe = function(session) {\n    if(!this._ready)return;\n    session.blendModeManager.setBlendMode(this.blendMode);\n    session.shaderManager.setShader(this.shaderType);\n    var shader = session.shaderManager.currentShader;\n    shader.uniforms.projectionMatrix.value = this.worldTransform.toArray(true);\n    shader.uniforms.projectionVector.value = session.projection;\n    shader.uniforms.uSampler.value = this.texture;\n    shader.syncUniforms();\n    var gl = session.gl;\n\n    if(!this.dynamicBuffer)this.initBuffers(gl,shader);\n    this.uploadDynamic(gl);\n    this.bindBuffers(gl,shader);\n\n    gl.drawElements(gl.TRIANGLES, this.indices.length, gl.UNSIGNED_SHORT, 0);\n\n};\nSprite.prototype.initBuffers = function(gl, shader) {\n    var i;\n    var property;\n\n    var dynamicOffset = 0;\n    this.dynamicStride = 0;\n\n    for (i in shader.attributes) {\n        property = shader.attributes[i];\n\n        property.offset = dynamicOffset;\n        dynamicOffset += property.size;\n        this.dynamicStride += property.size;\n    }\n\n    this.dynamicData = new Float32Array(this.dynamicStride * 4);\n    this.dynamicBuffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this.dynamicData, gl.DYNAMIC_DRAW);\n\n\n\n    this.indexBuffer = gl.createBuffer();\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indices, gl.STATIC_DRAW);\n};\n\nSprite.prototype.bindBuffers = function(gl,shader) {\n    var i,property;\n        \n    gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n\n    for (i in shader.attributes) {\n        property = shader.attributes[i];\n        gl.enableVertexAttribArray(property._location);\n        gl.vertexAttribPointer(property._location, property.size, gl.FLOAT, false, this.dynamicStride * 4, property.offset * 4);\n    }\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n};\nSprite.prototype.uploadDynamic = function(gl) {\n\n    var uvs = this.texture._uvs.get();\n\n    if(!this.update){\n        for(var i = 0;i<4;i++){\n            this.dynamicData[i*this.dynamicStride] = this.vertices[i*2];\n            this.dynamicData[i*this.dynamicStride+1] = this.vertices[i*2+1];\n\n            this.dynamicData[i*this.dynamicStride+2] = uvs[i*2];\n            this.dynamicData[i*this.dynamicStride+3] = uvs[i*2+1];\n\n\n            this.dynamicData[i*this.dynamicStride+4] = this.aColor[0];\n            this.dynamicData[i*this.dynamicStride+5] = this.aColor[1];\n            this.dynamicData[i*this.dynamicStride+6] = this.aColor[2];\n            this.dynamicData[i*this.dynamicStride+7] = this.aColor[3];\n        }\n        this.update = true;\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.dynamicBuffer);\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.dynamicData);\n\n};\n\nSprite.prototype.getBounds = function() {\n\n};\n\n\nSprite.prototype.containsPoint = function(point) {\n    return true;\n};\n","function ParticleContainer(maxSize, properties, batchSize) {\n    JC.Container.call(this);\n\n    batchSize = batchSize || 15000; //CONST.SPRITE_BATCH_SIZE; // 2000 is a nice balance between mobile / desktop\n    maxSize = maxSize || 15000;\n\n    // Making sure the batch size is valid\n    // 65535 is max vertex index in the index buffer (see ParticleRenderer)\n    // so max number of particles is 65536 / 4 = 16384\n    var maxBatchSize = 16384;\n    if (batchSize > maxBatchSize) {\n        batchSize = maxBatchSize;\n    }\n\n    if (batchSize > maxSize) {\n        batchSize = maxSize;\n    }\n\n    /**\n     * Set properties to be dynamic (true) / static (false)\n     *\n     * @member {boolean[]}\n     * @private\n     */\n    this._properties = [false, true, false, false, false];\n\n    /**\n     * @member {number}\n     * @private\n     */\n    this._maxSize = maxSize;\n\n    /**\n     * @member {number}\n     * @private\n     */\n    this._batchSize = batchSize;\n\n    /**\n     * @member {WebGLBuffer}\n     * @private\n     */\n    this._buffers = null;\n\n    /**\n     * @member {number}\n     * @private\n     */\n    this._bufferToUpdate = 0;\n\n    /**\n     * @member {boolean}\n     *\n     */\n    this.interactiveChildren = false;\n\n    /**\n     * The blend mode to be applied to the sprite. Apply a value of `PIXI.BLEND_MODES.NORMAL` to reset the blend mode.\n     *\n     * @member {number}\n     * @default PIXI.BLEND_MODES.NORMAL\n     * @see PIXI.BLEND_MODES\n     */\n    this.blendMode = JC.CONST.BLEND_MODES.NORMAL;\n\n    this.setProperties(properties);\n}\n\nJC.ParticleContainer = ParticleContainer;\nParticleContainer.prototype = Object.create(JC.Container.prototype);\nParticleContainer.prototype.constructor = JC.ParticleContainer;\n\n/**\n * Sets the private properties array to dynamic / static based on the passed properties object\n *\n * @param properties {object} The properties to be uploaded\n */\nParticleContainer.prototype.setProperties = function(properties) {\n    if (properties) {\n        this._properties[0] = 'scale' in properties ? !!properties.scale : this._properties[0];\n        this._properties[1] = 'position' in properties ? !!properties.position : this._properties[1];\n        this._properties[2] = 'rotation' in properties ? !!properties.rotation : this._properties[2];\n        this._properties[3] = 'uvs' in properties ? !!properties.uvs : this._properties[3];\n        this._properties[4] = 'alpha' in properties ? !!properties.alpha : this._properties[4];\n    }\n};\n\nParticleContainer.prototype.updateTransform = function() {\n\n    this.displayObjectUpdateTransform();\n};\n\nParticleContainer.prototype.render = function(session) {\n    if (!this.visible || this.worldAlpha <= 0 || !this.children.length || !this.renderable) {\n        return;\n    }\n\n    renderer.setObjectRenderer(renderer.plugins.particle);\n    renderer.plugins.particle.render(this);\n};\n","function Renderer(view, options) {\n    options = options || {};\n\n    if (options) {\n        for (var i in JC.CONST.DEFAULT_RENDER_OPTIONS) {\n            if (typeof options[i] === 'undefined') {\n                options[i] = JC.CONST.DEFAULT_RENDER_OPTIONS[i];\n            }\n        }\n    } else {\n        options = JC.CONST.DEFAULT_RENDER_OPTIONS;\n    }\n\n    this.view = typeof view !== 'string' ? view : document.getElementById(view);\n\n    this.width = this.view.width;\n    this.height = this.view.height;\n\n    this.projection = new Float32Array([this.width >> 1, this.height >> 1]);\n\n    this.resolution = options.resolution;\n\n    this.transparent = options.transparent;\n\n    this.autoResize = options.autoResize || false;\n\n    this.blendModes = null;\n\n    this.preserveDrawingBuffer = options.preserveDrawingBuffer;\n\n    this.autoClear = options.autoClear;\n\n    this._backgroundColor = 0x000000;\n\n    this._backgroundColorRgb = [0, 0, 0];\n\n    this._backgroundColorString = '#000000';\n\n    this.backgroundColor = options.backgroundColor || this._backgroundColor;\n\n\n    this.handleContextLost = this.handleContextLost.bind(this);\n    this.handleContextRestored = this.handleContextRestored.bind(this);\n\n    this.view.addEventListener('webglcontextlost', this.handleContextLost, false);\n    this.view.addEventListener('webglcontextrestored', this.handleContextRestored, false);\n\n    this._contextOptions = {\n        alpha: this.transparent,\n        antialias: options.antialias,\n        premultipliedAlpha: this.transparent && this.transparent !== 'notMultiplied',\n        stencil: true,\n        preserveDrawingBuffer: options.preserveDrawingBuffer\n    };\n\n    // this.drawCount = 0;\n    this.event = new JC.Eventer();\n\n    this._createContext();\n    this._initContext();\n\n    this._mapGlModes();\n\n\n    this.shaderManager = new JC.ShaderManager(this);\n\n    this.blendModeManager = new JC.BlendModeManager(this);\n\n    this.renderSession = {};\n    this.renderSession.gl = this.gl;\n    this.renderSession.drawCount = 0;\n    this.renderSession.shaderManager = this.shaderManager;\n    this.renderSession.blendModeManager = this.blendModeManager;\n    this.renderSession.renderer = this;\n    this.renderSession.resolution = this.resolution;\n\n    this._tempDisplayObjectParent = {worldTransform: JC.IDENTITY, worldAlpha:1, children:[]};\n\n    this.pt = -1;\n    this.timeScale = 1;\n}\n\n// constructor\nJC.Renderer = Renderer;\nRenderer.prototype.constructor = JC.Renderer;\n\nRenderer.prototype._createContext = function() {\n    var gl = this.view.getContext('webgl', this._contextOptions) || this.view.getContext('experimental-webgl', this._contextOptions);\n    this.gl = gl;\n\n    if (!gl) {\n        throw new Error('This browser does not support webGL. Try using the canvas renderer');\n    }\n\n    gl.renderer = this;\n};\n\nRenderer.prototype._initContext = function() {\n    var gl = this.gl;\n\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.CULL_FACE);\n    gl.enable(gl.BLEND);\n\n    this.event.emit({type: 'context'}, gl);\n\n    this.resize(this.width, this.height);\n\n};\n\nRenderer.prototype.render = function(object) {\n    if(this.pt<=0||Date.now()-this.pt>200)this.pt = Date.now();\n    var snippet = Date.now()-this.pt;\n    this.pt += snippet;\n\n    this.event.emit({type: 'prerender'});\n\n    if (this.gl.isContextLost()) {\n        return;\n    }\n\n    // this.drawCount = 0;\n    this.renderSession.projection = this.projection;\n    var cacheParent = object.parent;\n    object.parent = this._tempDisplayObjectParent;\n    object.updateTransform(this.timeScale*snippet);\n    object.parent = cacheParent;\n\n    var gl = this.gl;\n\n\n    if (this.autoClear) {\n        if (this.transparent) {\n            gl.clearColor(0, 0, 0, 0);\n        } else {\n            gl.clearColor(this._backgroundColorRgb[0], this._backgroundColorRgb[1], this._backgroundColorRgb[2], 1);\n        }\n        gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n\n    this.renderDisplayObject(object);\n\n    this.event.emit({type: 'postrender'});\n};\n\nRenderer.prototype.renderDisplayObject = function(displayObject) {\n    displayObject.render(this.renderSession);\n};\n\nRenderer.prototype.handleContextLost = function(event) {\n    event.preventDefault();\n};\n\nRenderer.prototype.handleContextRestored = function() {\n    this._initContext();\n};\n\nRenderer.prototype._mapGlModes = function() {\n    var gl = this.gl;\n\n    if (!this.blendModes) {\n        this.blendModes = {};\n\n        this.blendModes[JC.CONST.BLEND_MODES.NORMAL] = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n        this.blendModes[JC.CONST.BLEND_MODES.ADD] = [gl.ONE, gl.DST_ALPHA];\n        this.blendModes[JC.CONST.BLEND_MODES.MULTIPLY] = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA];\n        this.blendModes[JC.CONST.BLEND_MODES.SCREEN] = [gl.ONE, gl.ONE_MINUS_SRC_COLOR];\n    }\n\n    if (!this.drawModes) {\n        this.drawModes = {};\n\n        this.drawModes[JC.CONST.DRAW_MODES.POINTS] = gl.POINTS;\n        this.drawModes[JC.CONST.DRAW_MODES.LINES] = gl.LINES;\n        this.drawModes[JC.CONST.DRAW_MODES.LINE_LOOP] = gl.LINE_LOOP;\n        this.drawModes[JC.CONST.DRAW_MODES.LINE_STRIP] = gl.LINE_STRIP;\n        this.drawModes[JC.CONST.DRAW_MODES.TRIANGLES] = gl.TRIANGLES;\n        this.drawModes[JC.CONST.DRAW_MODES.TRIANGLE_STRIP] = gl.TRIANGLE_STRIP;\n        this.drawModes[JC.CONST.DRAW_MODES.TRIANGLE_FAN] = gl.TRIANGLE_FAN;\n    }\n};\n\nObject.defineProperties(Renderer.prototype, {\n    backgroundColor: {\n        get: function() {\n            return this._backgroundColor;\n        },\n        set: function(val) {\n            this._backgroundColor = val;\n            this._backgroundColorString = JC.UTILS.hex2string(val);\n            JC.UTILS.hex2rgb(val, this._backgroundColorRgb);\n        }\n    }\n});\n\nRenderer.prototype.resize = function(width, height) {\n    this.width = width * this.resolution;\n    this.height = height * this.resolution;\n\n    this.view.width = this.width;\n    this.view.height = this.height;\n    this.gl.viewport(0, 0, this.width, this.height);\n\n    this.projection = new Float32Array([this.width >> 1, this.height >> 1]);\n\n    if (this.autoResize) {\n        this.view.style.width = this.width / this.resolution + 'px';\n        this.view.style.height = this.height / this.resolution + 'px';\n    }\n};\n","function ShaderManager(renderer) {\n\n    this.renderer = renderer;\n\n    this.shaderType = '';\n\n    this.currentShader = null;\n\n    this.init();\n}\nJC.ShaderManager = ShaderManager;\nShaderManager.prototype.constructor = JC.ShaderManager;\n\nShaderManager.prototype.init = function() {\n\n    var gl = this.renderer.gl;\n\n    this.maxAttibs = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n\n    this.shaderPool = {\n        particle: new ParticleShader(gl),\n        sprite: new SpriteShader(gl),\n        graphics: new GraphicsShader(gl),\n        // text: new TextShader(gl)\n    };\n};\n\nShaderManager.prototype.setShader = function(shaderType) {\n    if (this.shaderType === shaderType) {\n        return false;\n    }\n\n    this.currentShader = this.shaderPool[shaderType];\n\n    this.renderer.gl.useProgram(this.currentShader.program);\n\n    this.shaderType = shaderType;\n\n    return true;\n};\n","function BlendModeManager(renderer) {\n    this.renderer = renderer;\n\n    this.currentBlendMode = 99999;\n}\nJC.BlendModeManager = BlendModeManager;\nBlendModeManager.prototype.constructor = JC.BlendModeManager;\nBlendModeManager.prototype.setBlendMode = function(blendMode) {\n    if (this.currentBlendMode === blendMode) {\n        return false;\n    }\n\n    this.currentBlendMode = blendMode;\n\n    var mode = this.renderer.blendModes[this.currentBlendMode];\n    this.renderer.gl.blendFunc(mode[0], mode[1]);\n\n    return true;\n};\n","function Shader(gl, vertexSrc, fragmentSrc, uniforms, attributes) {\n    if (!vertexSrc || !fragmentSrc) {\n        throw new Error('jcw2d.js Error. Shader requires vertexSrc and fragmentSrc');\n    }\n\n    this.type = '';\n\n    this.gl = gl;\n\n    this.program = null;\n\n    this.uniforms = uniforms || {};\n\n    this.attributes = attributes || {};\n\n    this.textureCount = 1;\n\n    this.MAX_TEXTURE_UNITS = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\n    this.vertexSrc = vertexSrc;\n\n    this.fragmentSrc = fragmentSrc;\n\n    this.init();\n}\n\nShader.prototype.constructor = Shader;\n\nShader.prototype.init = function() {\n    this.compile();\n\n    this.gl.useProgram(this.program);\n\n    this.cacheUniformLocations(Object.keys(this.uniforms));\n    this.cacheAttributeLocations(Object.keys(this.attributes));\n};\n\nShader.prototype.cacheUniformLocations = function(keys) {\n    for (var i = 0; i < keys.length; ++i) {\n        this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n    }\n};\n\nShader.prototype.cacheAttributeLocations = function(keys) {\n    for (var i = 0; i < keys.length; ++i) {\n        this.attributes[keys[i]]._location = this.gl.getAttribLocation(this.program, keys[i]);\n    }\n};\n\nShader.prototype.compile = function() {\n    var gl = this.gl;\n\n    var glVertShader = this._glCompile(gl.VERTEX_SHADER, this.vertexSrc);\n    var glFragShader = this._glCompile(gl.FRAGMENT_SHADER, this.fragmentSrc);\n\n    var program = gl.createProgram();\n\n    gl.attachShader(program, glVertShader);\n    gl.attachShader(program, glFragShader);\n    gl.linkProgram(program);\n\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n        console.error('jcw2d.js Error: Could not initialize shader.');\n        console.error('gl.VALIDATE_STATUS', gl.getProgramParameter(program, gl.VALIDATE_STATUS));\n        console.error('gl.getError()', gl.getError());\n\n        if (gl.getProgramInfoLog(program) !== '') {\n            console.warn('jcw2d.js Warning: gl.getProgramInfoLog()', gl.getProgramInfoLog(program));\n        }\n\n        gl.deleteProgram(program);\n        program = null;\n    }\n\n    // clean up some shaders\n    gl.deleteShader(glVertShader);\n    gl.deleteShader(glFragShader);\n\n    return (this.program = program);\n};\n\nShader.prototype.syncUniform = function(uniform) {\n    var location = uniform._location,\n        value = uniform.value,\n        gl = this.gl,\n        i, il;\n\n    switch (uniform.type) {\n        case 'b':\n        case 'bool':\n        case 'boolean':\n            gl.uniform1i(location, value ? 1 : 0);\n            break;\n\n            // single int value\n        case 'i':\n        case '1i':\n            gl.uniform1i(location, value);\n            break;\n\n            // single float value\n        case 'f':\n        case '1f':\n            gl.uniform1f(location, value);\n            break;\n\n            // Float32Array(2) or JS Arrray\n        case '2f':\n            gl.uniform2f(location, value[0], value[1]);\n            break;\n\n            // Float32Array(3) or JS Arrray\n        case '3f':\n            gl.uniform3f(location, value[0], value[1], value[2]);\n            break;\n\n            // Float32Array(4) or JS Arrray\n        case '4f':\n            gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n            break;\n\n            // a 2D Point object\n        case 'v2':\n            gl.uniform2f(location, value.x, value.y);\n            break;\n\n            // a 3D Point object\n        case 'v3':\n            gl.uniform3f(location, value.x, value.y, value.z);\n            break;\n\n            // a 4D Point object\n        case 'v4':\n            gl.uniform4f(location, value.x, value.y, value.z, value.w);\n            break;\n\n            // Int32Array or JS Array\n        case '1iv':\n            gl.uniform1iv(location, value);\n            break;\n\n            // Int32Array or JS Array\n        case '2iv':\n            gl.uniform2iv(location, value);\n            break;\n\n            // Int32Array or JS Array\n        case '3iv':\n            gl.uniform3iv(location, value);\n            break;\n\n            // Int32Array or JS Array\n        case '4iv':\n            gl.uniform4iv(location, value);\n            break;\n\n            // Float32Array or JS Array\n        case '1fv':\n            gl.uniform1fv(location, value);\n            break;\n\n            // Float32Array or JS Array\n        case '2fv':\n            gl.uniform2fv(location, value);\n            break;\n\n            // Float32Array or JS Array\n        case '3fv':\n            gl.uniform3fv(location, value);\n            break;\n\n            // Float32Array or JS Array\n        case '4fv':\n            gl.uniform4fv(location, value);\n            break;\n\n            // Float32Array or JS Array\n        case 'm2':\n        case 'mat2':\n        case 'Matrix2fv':\n            gl.uniformMatrix2fv(location, uniform.transpose||false, value);\n            break;\n\n            // Float32Array or JS Array\n        case 'm3':\n        case 'mat3':\n        case 'Matrix3fv':\n\n            gl.uniformMatrix3fv(location, uniform.transpose||false, value);\n            break;\n\n            // Float32Array or JS Array\n        case 'm4':\n        case 'mat4':\n        case 'Matrix4fv':\n            gl.uniformMatrix4fv(location, uniform.transpose||false, value);\n            break;\n\n            // a Color Value\n        case 'c':\n            if (typeof value === 'number') {\n                value = utils.hex2rgb(value);\n            }\n\n            gl.uniform3f(location, value[0], value[1], value[2]);\n            break;\n\n            // flat array of integers (JS or typed array)\n        case 'iv1':\n            gl.uniform1iv(location, value);\n            break;\n\n            // flat array of integers with 3 x N size (JS or typed array)\n        case 'iv':\n            gl.uniform3iv(location, value);\n            break;\n\n            // flat array of floats (JS or typed array)\n        case 'fv1':\n            gl.uniform1fv(location, value);\n            break;\n\n            // flat array of floats with 3 x N size (JS or typed array)\n        case 'fv':\n            gl.uniform3fv(location, value);\n            break;\n\n            // array of 2D Point objects\n        case 'v2v':\n            if (!uniform._array) {\n                uniform._array = new Float32Array(2 * value.length);\n            }\n\n            for (i = 0, il = value.length; i < il; ++i) {\n                uniform._array[i * 2] = value[i].x;\n                uniform._array[i * 2 + 1] = value[i].y;\n            }\n\n            gl.uniform2fv(location, uniform._array);\n            break;\n\n            // array of 3D Point objects\n        case 'v3v':\n            if (!uniform._array) {\n                uniform._array = new Float32Array(3 * value.length);\n            }\n\n            for (i = 0, il = value.length; i < il; ++i) {\n                uniform._array[i * 3] = value[i].x;\n                uniform._array[i * 3 + 1] = value[i].y;\n                uniform._array[i * 3 + 2] = value[i].z;\n\n            }\n\n            gl.uniform3fv(location, uniform._array);\n            break;\n\n            // array of 4D Point objects\n        case 'v4v':\n            if (!uniform._array) {\n                uniform._array = new Float32Array(4 * value.length);\n            }\n\n            for (i = 0, il = value.length; i < il; ++i) {\n                uniform._array[i * 4] = value[i].x;\n                uniform._array[i * 4 + 1] = value[i].y;\n                uniform._array[i * 4 + 2] = value[i].z;\n                uniform._array[i * 4 + 3] = value[i].w;\n\n            }\n\n            gl.uniform4fv(location, uniform._array);\n            break;\n\n            // PIXI.Texture\n        case 't':\n        case 'sampler2D':\n\n            if (!uniform.value || !uniform.value.baseTexture.hasLoaded) {\n                break;\n            }\n\n            // activate this texture\n            gl.activeTexture(gl['TEXTURE' + this.textureCount]);\n\n            var texture = uniform.value.baseTexture.texture;\n\n            if (!texture) {\n                this.initSampler2D(uniform);\n\n                // set the textur to the newly created one..\n                texture = uniform.value.baseTexture.texture;\n            }\n\n            // bind the texture\n            gl.bindTexture(gl.TEXTURE_2D, texture);\n\n            // set uniform to texture index\n            gl.uniform1i(uniform._location, this.textureCount);\n\n            // increment next texture id\n            this.textureCount++;\n\n            break;\n\n        default:\n            console.warn('jcw2d.js Shader Warning: Unknown uniform type: ' + uniform.type);\n    }\n};\n\nShader.prototype.syncUniforms = function() {\n    this.textureCount = 1;\n\n    for (var key in this.uniforms) {\n        this.syncUniform(this.uniforms[key]);\n    }\n};\n\nShader.prototype.initSampler2D = function(uniform) {\n    var gl = this.gl;\n\n    var texture = uniform.value.baseTexture;\n\n    if (!texture.hasLoaded) {\n        return;\n    }\n\n    this.updateTexture(texture);\n};\n\nShader.prototype.updateTexture = function(texture) {\n    texture = texture.baseTexture || texture;\n\n    if (!texture.hasLoaded) {\n        return;\n    }\n\n    var gl = this.gl;\n\n    if (!texture.texture) {\n        texture.texture = gl.createTexture();\n        texture.on('update', this.updateTexture, this);\n    }\n\n\n    gl.bindTexture(gl.TEXTURE_2D, texture.texture);\n\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultipliedAlpha);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, texture.source);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);\n\n\n    if (texture.mipmap && texture.isPowerOfTwo) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR_MIPMAP_LINEAR : gl.NEAREST_MIPMAP_NEAREST);\n        gl.generateMipmap(gl.TEXTURE_2D);\n    } else {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, texture.scaleMode === JC.CONST.SCALE_MODES.LINEAR ? gl.LINEAR : gl.NEAREST);\n    }\n\n    if (!texture.isPowerOfTwo) {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    } else {\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n    }\n\n    return texture.texture;\n};\n\nShader.prototype._glCompile = function(type, src) {\n    var shader = this.gl.createShader(type);\n\n    this.gl.shaderSource(shader, src);\n    this.gl.compileShader(shader);\n\n    if (!this.gl.getShaderParameter(shader, this.gl.COMPILE_STATUS)) {\n        console.log(this.gl.getShaderInfoLog(shader));\n        return null;\n    }\n\n    return shader;\n};\n","function SpriteShader(gl) {\n    var uniforms = {\n        uSampler: { type: 'sampler2D', value: 0 },\n        projectionMatrix: {\n            type: 'mat3',\n            value: new Float32Array([1, 0, 0,\n                0, 1, 0,\n                0, 0, 1\n            ])\n        },\n        projectionVector: {\n            type: '2fv',\n            value: new Float32Array([1, 1])\n        }\n    };\n\n    var attributes = {\n        aVertexPosition: {\n            size: 2,\n        },\n        aTextureCoord: {\n            size: 2,\n        },\n        aColor: {\n            size: 4,\n        }\n    };\n\n    var vertexSrc = [\n        'precision highp float;',\n        'attribute vec2 aVertexPosition;',\n        'attribute vec2 aTextureCoord;',\n        'attribute vec4 aColor;',\n\n        'uniform mat3 projectionMatrix;',\n        'uniform vec2 projectionVector;',\n\n        'varying vec2 vTextureCoord;',\n        'varying vec4 vColor;',\n\n        'void main(void){',\n        '   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy / projectionVector, 0.0, 1.0);',\n        '   vTextureCoord = aTextureCoord;',\n        '   vColor = vec4(aColor.rgb * aColor.a, aColor.a);',\n        '}'\n    ].join('\\n');\n\n    var fragmentSrc = [\n        'precision highp float;',\n\n        'varying vec2 vTextureCoord;',\n        'varying vec4 vColor;',\n\n        'uniform sampler2D uSampler;',\n\n        'void main(void){',\n        '   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;',\n        '}'\n    ].join('\\n');\n\n\n    Shader.call(this, gl, vertexSrc, fragmentSrc, uniforms, attributes);\n}\n\n// constructor\nSpriteShader.prototype = Object.create(Shader.prototype);\nSpriteShader.prototype.constructor = SpriteShader;\n","function ParticleShader(gl) {\n    var uniforms = {\n        uAlpha: { type: '1f', value: 1 },\n        uSampler: { type: 'sampler2D', value: 0 },\n        projectionMatrix: {\n            type: 'mat3',\n            value: new Float32Array([1, 0, 0,\n                0, 1, 0,\n                0, 0, 1\n            ])\n        },\n        projectionVector: {\n            type: '2fv',\n            value: new Float32Array([1, 1])\n        }\n    };\n\n\n\n    var attributes = {\n        aVertexPosition: 0,\n        aTextureCoord: 0,\n        aAlpha: 0,\n        aPositionCoord: 0,\n        aRotation: 0\n    };\n\n    var vertexSrc = [\n        'precision lowp float;',\n\n        'attribute vec2 aVertexPosition;',\n        'attribute vec2 aTextureCoord;',\n        'attribute float aAlpha;',\n\n        'attribute vec2 aPositionCoord;',\n        'attribute float aRotation;',\n\n        'uniform mat3 projectionMatrix;',\n        'uniform vec2 projectionVector;',\n\n        'varying vec2 vTextureCoord;',\n        'varying float vAlpha;',\n\n        'void main(void){',\n        '   vec2 v = aVertexPosition;',\n\n        '   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);',\n        '   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);',\n        '   v = v + aPositionCoord;',\n\n        '   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy / projectionVector, 0.0, 1.0);',\n\n        '   vTextureCoord = aTextureCoord;',\n        '   vAlpha = aAlpha;',\n        '}'\n    ].join('\\n');\n\n    var fragmentSrc = [\n        'precision lowp float;',\n\n        'varying vec2 vTextureCoord;',\n        'varying float vAlpha;',\n\n        'uniform sampler2D uSampler;',\n        'uniform float uAlpha;',\n\n        'void main(void){',\n        '  vec4 color = texture2D(uSampler, vTextureCoord) * vAlpha * uAlpha;',\n        '  if (color.a == 0.0) discard;',\n        '  gl_FragColor = color;',\n        '}'\n    ].join('\\n');\n\n\n    Shader.call(this, gl, vertexSrc, fragmentSrc, uniforms, attributes);\n\n}\n\nParticleShader.prototype = Object.create(Shader.prototype);\nParticleShader.prototype.constructor = ParticleShader;\n","function GraphicsShader(gl) {\n    Shader.call(this,\n        gl,\n        // vertex shader\n        [\n            'attribute vec2 aVertexPosition;',\n            'attribute vec4 aColor;',\n\n            'uniform mat3 projectionMatrix;',\n            'uniform vec2 projectionVector;',\n\n            'uniform float alpha;',\n            'uniform vec3 tint;',\n\n            'varying vec4 vColor;',\n\n            'void main(void){',\n            '   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy / projectionVector, 0.0, 1.0);',\n            '   vColor = aColor * vec4(tint * alpha, alpha);',\n            '}'\n        ].join('\\n'),\n        // fragment shader\n        [\n            'precision mediump float;',\n\n            'varying vec4 vColor;',\n\n            'void main(void){',\n            '   gl_FragColor = vColor;',\n            '}'\n        ].join('\\n'),\n        // custom uniforms\n        {\n            tint: { type: '3f', value: [0, 0, 0] },\n            alpha: { type: '1f', value: 0 },\n            projectionMatrix: { type: 'mat3', value: new Float32Array(9) },\n            projectionVector: {\n                type: '2fv',\n                value: new Float32Array([1, 1])\n            }\n        },\n        // custom attributes\n        {\n            aVertexPosition: 0,\n            aColor: 0\n        }\n    );\n}\n\nGraphicsShader.prototype = Object.create(Shader.prototype);\nGraphicsShader.prototype.constructor = GraphicsShader;\n","(function() {\n    var lastTime = 0;\n    var androidUC = /(?=.*?uc)(?=.*?android)/i.test(window.navigator.userAgent);\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 20 - (currTime - lastTime));\n            var id = window.setTimeout(function() { callback(currTime + timeToCall); },\n                timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    }\n\n    if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n    }\n\n    window.RAF = window.requestAnimFrame = window.requestAnimationFrame;\n})();\n","\nJC.CONST = {\n    VERSION: '0.0.1',\n\n    PI_2: Math.PI * 2,\n\n    RTD: 180 / Math.PI,\n\n    DTR: Math.PI / 180,\n\n\n    /**\n     *\n     * @static\n     * @constant\n     * @property {object} BLEND_MODES\n     * @property {number} BLEND_MODES.NORMAL\n     * @property {number} BLEND_MODES.ADD\n     * @property {number} BLEND_MODES.MULTIPLY\n     * @property {number} BLEND_MODES.SCREEN\n     */\n    BLEND_MODES: {\n        NORMAL:         0,\n        ADD:            1,\n        MULTIPLY:       2,\n        SCREEN:         3\n    },\n\n    /**\n     *\n     * @static\n     * @constant\n     * @property {object} DRAW_MODES\n     * @property {number} DRAW_MODES.POINTS\n     * @property {number} DRAW_MODES.LINES\n     * @property {number} DRAW_MODES.LINE_LOOP\n     * @property {number} DRAW_MODES.LINE_STRIP\n     * @property {number} DRAW_MODES.TRIANGLES\n     * @property {number} DRAW_MODES.TRIANGLE_STRIP\n     * @property {number} DRAW_MODES.TRIANGLE_FAN\n     */\n    DRAW_MODES: {\n        POINTS:         0,\n        LINES:          1,\n        LINE_LOOP:      2,\n        LINE_STRIP:     3,\n        TRIANGLES:      4,\n        TRIANGLE_STRIP: 5,\n        TRIANGLE_FAN:   6\n    },\n\n    /**\n     *\n     * @static\n     * @constant\n     * @property {object} SCALE_MODES\n     * @property {number} SCALE_MODES.DEFAULT=LINEAR\n     * @property {number} SCALE_MODES.LINEAR Smooth scaling\n     * @property {number} SCALE_MODES.NEAREST Pixelating scaling\n     */\n    SCALE_MODES: {\n        DEFAULT:    0,\n        LINEAR:     0,\n        NEAREST:    1\n    },\n\n    DEFAULT_RENDER_OPTIONS: {\n        view: null,\n        resolution: 1,\n        antialias: true,\n        autoResize: false,\n        transparent: false,\n        backgroundColor: 0x000000,\n        autoClear: true,\n        preserveDrawingBuffer: false\n    },\n\n    SPRITE_BATCH_SIZE: 2000 //nice balance between mobile and desktop machines\n};","JC.TWEEN = {\n    easeBoth: function(t, b, c, d) { //加速减速曲线\n        if ((t /= d / 2) < 1) {\n            return c / 2 * t * t + b;\n        }\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n    extend: function(opts) {\n        if (!opts) return;\n        for (var key in opts) {\n            if (key !== 'extend' && opts[key]) this[key] = opts[key];\n        }\n    }\n};\n"]}